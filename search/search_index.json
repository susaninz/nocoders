{"config":{"lang":["ru","en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83c\udfb8 nocoders","text":"<p>\"\u041c\u044b \u043d\u0435 \u043a\u043e\u0434\u0435\u0440\u044b, \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0434\u0440\u0443\u0433\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430. \u041d\u043e \u043c\u044b \u043a\u043e\u0434\u0438\u043c.\"</p>"},{"location":"#_1","title":"\ud83d\udc4b \u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c","text":"<p>\u0411\u0430\u0437\u0430 \u0437\u043d\u0430\u043d\u0438\u0439 \u0432\u0430\u0439\u0431\u043a\u043e\u0434\u0435\u0440\u0430 \u2014 Cursor, AI, \u043c\u0443\u043b\u044c\u0442\u0438\u0430\u0433\u0435\u043d\u0442\u043d\u043e\u0441\u0442\u044c \u0438 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e.</p> <p>\u042d\u0442\u043e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f \u043b\u0443\u0447\u0448\u0438\u0445 \u043f\u0440\u0430\u043a\u0442\u0438\u043a, \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u043e\u0432 \u0438 \u043d\u0430\u0445\u043e\u0434\u043e\u043a, \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u043d\u044b\u0445 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u0414\u043b\u044f \u0442\u0435\u0445, \u043a\u0442\u043e \u043a\u043e\u0434\u0438\u0442 \u043d\u0435 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0434\u043e\u043b\u0436\u0435\u043d, \u0430 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u044d\u0442\u043e \u043a\u0430\u0439\u0444.</p>"},{"location":"#_2","title":"\ud83d\udcda \u0420\u0430\u0437\u0434\u0435\u043b\u044b","text":""},{"location":"#python","title":"\ud83d\udc0d Python","text":"<p>\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0430 Python: async/await, SQLAlchemy, \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, type hints \u0438 \u043c\u043d\u043e\u0433\u043e\u0435 \u0434\u0440\u0443\u0433\u043e\u0435.</p>"},{"location":"#_3","title":"\ud83c\udfd7\ufe0f \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<p>\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0435 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b: Clean Architecture, Dependency Injection, State Machine, Repository Pattern.</p>"},{"location":"#telegram","title":"\ud83e\udd16 Telegram \u0431\u043e\u0442\u044b","text":"<p>\u0412\u0441\u0451 \u043e \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 Telegram \u0431\u043e\u0442\u043e\u0432: \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430, UI \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b, inline keyboards, workflows.</p>"},{"location":"#_4","title":"\ud83d\udee0\ufe0f \u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b","text":"<p>Git, Docker, CI/CD \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430.</p>"},{"location":"#_5","title":"\ud83d\udccb \u0428\u0430\u0431\u043b\u043e\u043d\u044b","text":"<p>\u0413\u043e\u0442\u043e\u0432\u044b\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432 \u0434\u043b\u044f \u0431\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0442\u0430.</p>"},{"location":"#_6","title":"\ud83c\udfaf \u041a\u0430\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f","text":"<ol> <li>\u041f\u043e\u0438\u0441\u043a \u2014 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 <code>Ctrl+K</code> \u0438\u043b\u0438 <code>/</code> \u0434\u043b\u044f \u0431\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u043f\u043e\u0438\u0441\u043a\u0430</li> <li>\u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f \u2014 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0431\u043e\u043a\u043e\u0432\u043e\u0435 \u043c\u0435\u043d\u044e \u0438\u043b\u0438 \u0442\u0430\u0431\u044b \u0441\u0432\u0435\u0440\u0445\u0443</li> <li>\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430 \u2014 \u043d\u0430\u0436\u043c\u0438 \u0438\u043a\u043e\u043d\u043a\u0443 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u0431\u043b\u043e\u043a\u0430\u0445 \u043a\u043e\u0434\u0430</li> <li>\u0422\u0451\u043c\u043d\u0430\u044f/\u0441\u0432\u0435\u0442\u043b\u0430\u044f \u0442\u0435\u043c\u0430 \u2014 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0442\u0435\u043b\u044c \u0432 \u0448\u0430\u043f\u043a\u0435</li> </ol>"},{"location":"#_7","title":"\ud83c\udd95 \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f","text":"\u0414\u0430\u0442\u0430 \u0420\u0430\u0437\u0434\u0435\u043b \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 2025-12-09 Python \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0440\u0430\u0437\u0434\u0435\u043b Connection Pooling 2025-12-09 \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043f\u0430\u0442\u0442\u0435\u0440\u043d Dependency Lifecycle Management 2025-12-09 \u2014 \u0421\u043e\u0437\u0434\u0430\u043d\u0430 \u0431\u0430\u0437\u0430 \u0437\u043d\u0430\u043d\u0438\u0439"},{"location":"#_8","title":"\ud83d\udca1 \u041f\u0440\u0438\u043d\u0446\u0438\u043f\u044b","text":"<p>\u0424\u0438\u043b\u043e\u0441\u043e\u0444\u0438\u044f \u0431\u0430\u0437\u044b \u0437\u043d\u0430\u043d\u0438\u0439</p> <ul> <li>\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u043d\u043e\u0441\u0442\u044c \u2014 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u043d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f</li> <li>\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u2014 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e \u043a \u0440\u0430\u0437\u043d\u044b\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u043c</li> <li>\u0410\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u2014 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435</li> <li>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u2014 \u043a\u043e\u0434 \u0432\u0430\u0436\u043d\u0435\u0435 \u0442\u0435\u043e\u0440\u0438\u0438</li> </ul>"},{"location":"#_9","title":"\ud83e\udd1d \u041a\u043e\u043d\u0442\u0440\u0438\u0431\u044c\u044e\u0446\u0438\u044f","text":"<p>\u041d\u0430\u0448\u0451\u043b \u043e\u0448\u0438\u0431\u043a\u0443 \u0438\u043b\u0438 \u0445\u043e\u0447\u0435\u0448\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0435? \u0421\u043e\u0437\u0434\u0430\u0439 Issue \u0438\u043b\u0438 Pull Request!</p>"},{"location":"architecture/","title":"\ud83c\udfd7\ufe0f \u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430","text":"<p>\u0410\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0435 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0438 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u044b \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f.</p>"},{"location":"architecture/#_2","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"\u0420\u0430\u0437\u0434\u0435\u043b \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 Clean Architecture \u0427\u0438\u0441\u0442\u0430\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u043e\u0451\u0432 Dependency Lifecycle \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 State Machine \u041a\u043e\u043d\u0435\u0447\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u044b \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c Repository Pattern \u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c"},{"location":"architecture/#_3","title":"\ud83c\udfaf \u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u044b","text":""},{"location":"architecture/#solid","title":"SOLID","text":"\u041f\u0440\u0438\u043d\u0446\u0438\u043f \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 Single Responsibility \u041e\u0434\u0438\u043d \u043a\u043b\u0430\u0441\u0441 \u2014 \u043e\u0434\u043d\u0430 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c Open/Closed \u041e\u0442\u043a\u0440\u044b\u0442 \u0434\u043b\u044f \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f, \u0437\u0430\u043a\u0440\u044b\u0442 \u0434\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f Liskov Substitution \u041f\u043e\u0434\u0442\u0438\u043f\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u043c\u0435\u043d\u044f\u0435\u043c\u044b Interface Segregation \u041c\u043d\u043e\u0433\u043e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0445 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u043b\u0443\u0447\u0448\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u043e\u0431\u0449\u0435\u0433\u043e Dependency Inversion \u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u043e\u0442 \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0439, \u043d\u0435 \u043e\u0442 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0439"},{"location":"architecture/#_4","title":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u044b","text":"<ul> <li>KISS \u2014 Keep It Simple, Stupid</li> <li>YAGNI \u2014 You Aren't Gonna Need It</li> <li>DRY \u2014 Don't Repeat Yourself</li> <li>Composition over Inheritance \u2014 \u041a\u043e\u043c\u043f\u043e\u0437\u0438\u0446\u0438\u044f \u0432\u043c\u0435\u0441\u0442\u043e \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f</li> </ul>"},{"location":"architecture/#clean-architecture","title":"\ud83c\udfdb\ufe0f \u0421\u043b\u043e\u0438 Clean Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           Presentation Layer            \u2502\n\u2502     (UI, Controllers, API Handlers)     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502           Application Layer             \u2502\n\u2502    (Use Cases, Services, Workflows)     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502             Domain Layer                \u2502\n\u2502   (Entities, Business Rules, Events)    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502          Infrastructure Layer           \u2502\n\u2502  (Database, External APIs, Frameworks)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439: \u0441\u043d\u0430\u0440\u0443\u0436\u0438 \u2192 \u0432\u043d\u0443\u0442\u0440\u044c\n</code></pre>"},{"location":"architecture/#_5","title":"\ud83d\udcd0 \u041a\u043e\u0433\u0434\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c","text":"\u0421\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f \u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043a\u0440\u0438\u043f\u0442 \u041d\u0435 \u043d\u0443\u0436\u043d\u043e, overcomplicated \u041d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 Repository + Service layer \u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 Clean Architecture lite \u0421\u043b\u043e\u0436\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 Full Clean Architecture Enterprise Clean Architecture + DDD"},{"location":"architecture/clean-architecture/","title":"Clean Architecture","text":"<p>\u0427\u0438\u0441\u0442\u0430\u044f \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u043e\u0451\u0432.</p>"},{"location":"architecture/clean-architecture/#_1","title":"\ud83c\udfaf \u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u0434\u0435\u044f","text":"<p>\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0432\u043d\u0443\u0442\u0440\u044c \u2014 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 \u0441\u043b\u043e\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u044e\u0442 \u043e \u0432\u043d\u0435\u0448\u043d\u0438\u0445.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    FRAMEWORKS &amp; DRIVERS                      \u2502\n\u2502                   (Web, DB, External APIs)                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502                 INTERFACE ADAPTERS                     \u2502  \u2502\n\u2502  \u2502              (Controllers, Gateways, Presenters)       \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502              APPLICATION BUSINESS                \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502                 (Use Cases)                      \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u2502         ENTERPRISE BUSINESS               \u2502  \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u2502            (Entities)                     \u2502  \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n         \u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439: \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\n                                   (\u0441\u043d\u0430\u0440\u0443\u0436\u0438 \u0432\u043d\u0443\u0442\u0440\u044c)\n</code></pre>"},{"location":"architecture/clean-architecture/#_2","title":"\ud83d\udcc1 \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430","text":"<pre><code>app/\n\u251c\u2500\u2500 domain/              # Enterprise Business (\u0446\u0435\u043d\u0442\u0440)\n\u2502   \u251c\u2500\u2500 entities/        # \u0411\u0438\u0437\u043d\u0435\u0441-\u043e\u0431\u044a\u0435\u043a\u0442\u044b\n\u2502   \u251c\u2500\u2500 value_objects/   # \u041d\u0435\u0438\u0437\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b\n\u2502   \u2514\u2500\u2500 events/          # \u0414\u043e\u043c\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f\n\u2502\n\u251c\u2500\u2500 application/         # Application Business\n\u2502   \u251c\u2500\u2500 use_cases/       # \u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f\n\u2502   \u251c\u2500\u2500 services/        # \u0421\u0435\u0440\u0432\u0438\u0441\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n\u2502   \u2514\u2500\u2500 interfaces/      # \u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u0438 (\u043f\u043e\u0440\u0442\u044b)\n\u2502\n\u251c\u2500\u2500 infrastructure/      # Frameworks &amp; Drivers\n\u2502   \u251c\u2500\u2500 database/        # \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f persistence\n\u2502   \u251c\u2500\u2500 external/        # \u0412\u043d\u0435\u0448\u043d\u0438\u0435 API\n\u2502   \u2514\u2500\u2500 config/          # \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f\n\u2502\n\u2514\u2500\u2500 presentation/        # Interface Adapters\n    \u251c\u2500\u2500 api/             # REST/GraphQL controllers\n    \u251c\u2500\u2500 cli/             # CLI handlers\n    \u2514\u2500\u2500 telegram/        # Bot handlers\n</code></pre>"},{"location":"architecture/clean-architecture/#_3","title":"\ud83e\uddf1 \u0421\u043b\u043e\u0438 \u0438 \u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438","text":""},{"location":"architecture/clean-architecture/#1-domain-layer-entities","title":"1. Domain Layer (Entities)","text":"<p>\u0427\u0442\u043e: \u0411\u0438\u0437\u043d\u0435\u0441-\u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0441 \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438 \u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438: \u041d\u0438\u043a\u0430\u043a\u0438\u0445!</p> <pre><code># domain/entities/user.py\nfrom dataclasses import dataclass\nfrom enum import Enum\n\nclass UserRole(Enum):\n    ADMIN = \"admin\"\n    USER = \"user\"\n\n@dataclass\nclass User:\n    id: int\n    username: str\n    email: str\n    role: UserRole = UserRole.USER\n\n    def can_manage_users(self) -&gt; bool:\n        \"\"\"\u0411\u0438\u0437\u043d\u0435\u0441-\u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0432 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438.\"\"\"\n        return self.role == UserRole.ADMIN\n</code></pre>"},{"location":"architecture/clean-architecture/#2-application-layer-use-cases","title":"2. Application Layer (Use Cases)","text":"<p>\u0427\u0442\u043e: \u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438: \u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0442 Domain</p> <pre><code># application/use_cases/create_user.py\nfrom domain.entities.user import User\nfrom application.interfaces.user_repository import UserRepository\n\nclass CreateUserUseCase:\n    def __init__(self, user_repo: UserRepository):\n        self.user_repo = user_repo\n\n    async def execute(self, username: str, email: str) -&gt; User:\n        # \u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430\n        if await self.user_repo.exists_by_email(email):\n            raise UserAlreadyExistsError(email)\n\n        user = User(id=None, username=username, email=email)\n        return await self.user_repo.save(user)\n</code></pre>"},{"location":"architecture/clean-architecture/#3-infrastructure-layer","title":"3. Infrastructure Layer","text":"<p>\u0427\u0442\u043e: \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 \u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438: \u041e\u0442 Application (\u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b)</p> <pre><code># infrastructure/database/user_repository_impl.py\nfrom application.interfaces.user_repository import UserRepository\nfrom domain.entities.user import User\n\nclass SQLAlchemyUserRepository(UserRepository):\n    def __init__(self, session: AsyncSession):\n        self.session = session\n\n    async def save(self, user: User) -&gt; User:\n        model = UserModel(**user.__dict__)\n        self.session.add(model)\n        await self.session.commit()\n        return user\n</code></pre>"},{"location":"architecture/clean-architecture/#4-presentation-layer","title":"4. Presentation Layer","text":"<p>\u0427\u0442\u043e: \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438: \u041e\u0442 Application (\u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 use cases)</p> <pre><code># presentation/api/user_controller.py\nfrom application.use_cases.create_user import CreateUserUseCase\n\nclass UserController:\n    def __init__(self, create_user: CreateUserUseCase):\n        self.create_user = create_user\n\n    async def post(self, request: CreateUserRequest) -&gt; UserResponse:\n        user = await self.create_user.execute(\n            username=request.username,\n            email=request.email\n        )\n        return UserResponse.from_entity(user)\n</code></pre>"},{"location":"architecture/clean-architecture/#dependency-inversion","title":"\ud83d\udd04 Dependency Inversion","text":""},{"location":"architecture/clean-architecture/#_4","title":"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b (\u043f\u043e\u0440\u0442\u044b)","text":"<pre><code># application/interfaces/user_repository.py\nfrom abc import ABC, abstractmethod\nfrom domain.entities.user import User\n\nclass UserRepository(ABC):\n    @abstractmethod\n    async def save(self, user: User) -&gt; User:\n        pass\n\n    @abstractmethod\n    async def get_by_id(self, user_id: int) -&gt; User | None:\n        pass\n</code></pre>"},{"location":"architecture/clean-architecture/#_5","title":"\u0418\u043d\u044a\u0435\u043a\u0446\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439","text":"<pre><code># Composition Root\ndef create_app():\n    # Infrastructure\n    engine = create_async_engine(DATABASE_URL)\n    session_factory = sessionmaker(engine, class_=AsyncSession)\n\n    # Repositories\n    user_repo = SQLAlchemyUserRepository(session_factory)\n\n    # Use Cases\n    create_user = CreateUserUseCase(user_repo)\n\n    # Controllers\n    user_controller = UserController(create_user)\n\n    return App(user_controller=user_controller)\n</code></pre>"},{"location":"architecture/clean-architecture/#_6","title":"\u2705 \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430","text":"\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0422\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0441\u0442\u044c \u041b\u0435\u0433\u043a\u043e \u043c\u043e\u043a\u0430\u0442\u044c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0413\u0438\u0431\u043a\u043e\u0441\u0442\u044c \u041b\u0435\u0433\u043a\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u041d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c Domain \u043d\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u043e\u0432 \u041f\u043e\u043d\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0427\u0451\u0442\u043a\u0438\u0435 \u0433\u0440\u0430\u043d\u0438\u0446\u044b \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438"},{"location":"architecture/clean-architecture/#_7","title":"\u26a0\ufe0f \u041a\u043e\u0433\u0434\u0430 \u041d\u0415 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c","text":"<ul> <li>\u041e\u0447\u0435\u043d\u044c \u043f\u0440\u043e\u0441\u0442\u044b\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u044b (overcomplicated)</li> <li>\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b \u0438 MVP</li> <li>\u0421\u043a\u0440\u0438\u043f\u0442\u044b \u0438 \u0443\u0442\u0438\u043b\u0438\u0442\u044b</li> <li>\u041a\u043e\u0433\u0434\u0430 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u0430\u0436\u043d\u0435\u0435 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u044b</li> </ul>"},{"location":"architecture/dependency-lifecycle/","title":"Dependency Lifecycle Management","text":"<p>\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0442\u0442\u0435\u0440\u043d \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439.</p>"},{"location":"architecture/dependency-lifecycle/#_1","title":"\ud83c\udfaf \u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u0434\u0435\u044f","text":"<p>\u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0436\u0438\u0437\u043d\u0438:</p> <ul> <li>Application Scope \u2014 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435</li> <li>Request Scope \u2014 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441</li> </ul>"},{"location":"architecture/dependency-lifecycle/#_2","title":"\u274c \u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430","text":"<pre><code># \u041f\u041b\u041e\u0425\u041e: \u0421\u043e\u0437\u0434\u0430\u0451\u043c \u0412\u0421\u0401 \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\nasync def handle_request(request):\n    http_client = HttpClient()           # 50ms \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435\n    config = load_config()               # \u0427\u0442\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430\n    db_session = create_session()        # OK\n    email_sender = EmailSender()         # \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f SMTP\n    ...\n</code></pre> <p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: \u041c\u0435\u0434\u043b\u0435\u043d\u043d\u043e, \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0451\u043c\u043a\u043e, \u043c\u043d\u043e\u0433\u043e \u043c\u0443\u0441\u043e\u0440\u0430 \u0434\u043b\u044f GC.</p>"},{"location":"architecture/dependency-lifecycle/#_3","title":"\u2705 \u0420\u0435\u0448\u0435\u043d\u0438\u0435","text":"<pre><code># \u0425\u041e\u0420\u041e\u0428\u041e: \u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0435\u043c \u043f\u043e scope\n\nclass Application:\n    \"\"\"Application Scope \u2014 \u0441\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0440\u0430\u0437.\"\"\"\n\n    def __init__(self):\n        # \u0422\u044f\u0436\u0451\u043b\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b\n        self.http_client = HttpClient(timeout=30)\n        self.email_sender = EmailSender(smtp_config)\n        self.config = load_config()\n\n        # Connection pools (\u043d\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f!)\n        self.db_engine = create_async_engine(url, pool_size=5)\n\n        # Stateless \u0441\u0435\u0440\u0432\u0438\u0441\u044b\n        self.notification_service = NotificationService(self.email_sender)\n\n\nasync def handle_request(request, app: Application):\n    \"\"\"Request Scope \u2014 \u0441\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.\"\"\"\n\n    async with app.db_engine.session() as session:\n        # \u0422\u043e\u043b\u044c\u043a\u043e \u0442\u043e, \u0447\u0442\u043e \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043e \u043a \u0441\u0435\u0441\u0441\u0438\u0438\n        user_repo = UserRepository(session)\n\n        # \u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0443\u0435\u043c app-scoped \u0438 request-scoped\n        service = UserService(\n            repo=user_repo,                    # Request-scoped\n            notifier=app.notification_service  # App-scoped (reuse!)\n        )\n\n        return await service.process(request)\n</code></pre>"},{"location":"architecture/dependency-lifecycle/#_4","title":"\ud83d\udcca \u041a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432","text":""},{"location":"architecture/dependency-lifecycle/#application-scope-singleton","title":"Application Scope (Singleton)","text":"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u041f\u043e\u0447\u0435\u043c\u0443 singleton HTTP/API \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0422\u044f\u0436\u0451\u043b\u0430\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f, connection pool Email/SMS senders \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c Config \u0427\u0442\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432, \u043f\u0430\u0440\u0441\u0438\u043d\u0433 Loggers \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 handlers Connection pools \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\u043c\u0438 Feature flags \u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 Metrics collectors \u0410\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u044f \u043c\u0435\u0442\u0440\u0438\u043a"},{"location":"architecture/dependency-lifecycle/#request-scope-per-request","title":"Request Scope (Per-request)","text":"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u041f\u043e\u0447\u0435\u043c\u0443 per-request DB Session \u0418\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 Repositories \u041f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u043a \u0441\u0435\u0441\u0441\u0438\u0438 Unit of Work Scope \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438 User context \u0414\u0430\u043d\u043d\u044b\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f Request cache \u041a\u044d\u0448 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"},{"location":"architecture/dependency-lifecycle/#dependency-container","title":"\ud83c\udfd7\ufe0f \u041f\u0430\u0442\u0442\u0435\u0440\u043d: Dependency Container","text":"<pre><code>from dataclasses import dataclass\nfrom contextlib import asynccontextmanager\n\n@dataclass\nclass AppContainer:\n    \"\"\"Application-scoped dependencies.\"\"\"\n    config: Config\n    db_engine: AsyncEngine\n    http_client: HttpClient\n    notification_service: NotificationService\n\n@dataclass\nclass RequestContainer:\n    \"\"\"Request-scoped dependencies.\"\"\"\n    session: AsyncSession\n    user_repo: UserRepository\n    task_repo: TaskRepository\n    current_user: User | None = None\n\n\nclass DependencyManager:\n    def __init__(self):\n        self._app: AppContainer | None = None\n\n    def initialize(self, config: Config) -&gt; None:\n        \"\"\"\u0412\u044b\u0437\u0432\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435.\"\"\"\n        self._app = AppContainer(\n            config=config,\n            db_engine=create_async_engine(config.db_url),\n            http_client=HttpClient(),\n            notification_service=NotificationService(),\n        )\n\n    @asynccontextmanager\n    async def request_scope(self):\n        \"\"\"\u0421\u043e\u0437\u0434\u0430\u0442\u044c request-scoped \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440.\"\"\"\n        async with self._app.db_engine.session() as session:\n            yield RequestContainer(\n                session=session,\n                user_repo=UserRepository(session),\n                task_repo=TaskRepository(session),\n            )\n\n\n# \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\ndeps = DependencyManager()\ndeps.initialize(config)\n\nasync def handle_message(message):\n    async with deps.request_scope() as req:\n        user = await req.user_repo.get_by_id(message.user_id)\n        # session \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043a\u0440\u043e\u0435\u0442\u0441\u044f\n</code></pre>"},{"location":"architecture/dependency-lifecycle/#_5","title":"\ud83d\udcd0 \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e\u0441\u0442\u044c","text":"\u0422\u0438\u043f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f App Scope Request Scope Web API App startup Per HTTP request Telegram \u0431\u043e\u0442 Bot startup Per message/callback CLI \u0443\u0442\u0438\u043b\u0438\u0442\u0430 Script start Per command Background worker Worker start Per job \u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441 Service start Per RPC call"},{"location":"architecture/dependency-lifecycle/#_6","title":"\u2705 \u041f\u0440\u0430\u0432\u0438\u043b\u0430","text":"<ul> <li>\u2705 \u0412\u0441\u0435\u0433\u0434\u0430 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u0443\u0439 scope \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430</li> <li>\u2705 App-scoped \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c thread-safe / async-safe</li> <li>\u2705 Request-scoped \u0434\u043e\u043b\u0436\u043d\u044b \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430</li> <li>\u2705 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 Dependency Injection</li> <li>\u274c \u041d\u0435 \u0445\u0440\u0430\u043d\u0438 request-scoped \u0432 app-scoped</li> <li>\u274c \u041d\u0435 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0439 \u0442\u044f\u0436\u0451\u043b\u044b\u0435 stateless \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441</li> <li>\u274c \u041d\u0435 \u043f\u0435\u0440\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 DB session \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438</li> </ul>"},{"location":"architecture/dependency-lifecycle/#_7","title":"\ud83d\udcc8 \u0412\u044b\u0438\u0433\u0440\u044b\u0448","text":"\u041c\u0435\u0442\u0440\u0438\u043a\u0430 \u0411\u0435\u0437 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u0430 \u0421 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u043e\u043c \u0412\u0440\u0435\u043c\u044f \u043e\u0442\u043a\u043b\u0438\u043a\u0430 100ms+ 10-20ms \u041f\u0430\u043c\u044f\u0442\u044c \u0420\u0430\u0441\u0442\u0451\u0442 \u0421\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u0430\u044f GC \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0412\u044b\u0441\u043e\u043a\u043e\u0435 \u041d\u0438\u0437\u043a\u043e\u0435 \u041c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u0443\u0435\u043c\u043e\u0441\u0442\u044c \u041f\u043b\u043e\u0445\u0430\u044f \u0425\u043e\u0440\u043e\u0448\u0430\u044f"},{"location":"architecture/repository-pattern/","title":"Repository Pattern","text":"<p>\u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0434\u0430\u043d\u043d\u044b\u043c.</p>"},{"location":"architecture/repository-pattern/#_1","title":"\ud83c\udfaf \u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u0434\u0435\u044f","text":"<p>Repository \u2014 \u044d\u0442\u043e \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044f \u043c\u0435\u0436\u0434\u0443 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u043e\u0439 \u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0445.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Service    \u2502\u2500\u2500\u2500\u2500\u25ba\u2502 Repository \u2502\u2500\u2500\u2500\u2500\u25ba\u2502   Database   \u2502\n\u2502  (\u043b\u043e\u0433\u0438\u043a\u0430)   \u2502     \u2502 (interface)\u2502     \u2502   (storage)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n                           \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  In-Memory \u2502  (\u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432)\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/repository-pattern/#_2","title":"\ud83c\udfd7\ufe0f \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f","text":""},{"location":"architecture/repository-pattern/#1","title":"1. \u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 (\u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044f)","text":"<pre><code>from abc import ABC, abstractmethod\nfrom typing import Generic, TypeVar, Optional\n\nT = TypeVar('T')\n\nclass Repository(ABC, Generic[T]):\n    \"\"\"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f.\"\"\"\n\n    @abstractmethod\n    async def get_by_id(self, entity_id: int) -&gt; Optional[T]:\n        \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c \u043f\u043e ID.\"\"\"\n        pass\n\n    @abstractmethod\n    async def get_all(self) -&gt; list[T]:\n        \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438.\"\"\"\n        pass\n\n    @abstractmethod\n    async def create(self, entity: T) -&gt; T:\n        \"\"\"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c.\"\"\"\n        pass\n\n    @abstractmethod\n    async def update(self, entity: T) -&gt; T:\n        \"\"\"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c.\"\"\"\n        pass\n\n    @abstractmethod\n    async def delete(self, entity_id: int) -&gt; bool:\n        \"\"\"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c.\"\"\"\n        pass\n</code></pre>"},{"location":"architecture/repository-pattern/#2","title":"2. \u0421\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441","text":"<pre><code>from domain.entities.user import User\n\nclass UserRepository(Repository[User]):\n    \"\"\"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.\"\"\"\n\n    @abstractmethod\n    async def get_by_email(self, email: str) -&gt; Optional[User]:\n        \"\"\"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e email.\"\"\"\n        pass\n\n    @abstractmethod\n    async def get_by_username(self, username: str) -&gt; Optional[User]:\n        \"\"\"\u041d\u0430\u0439\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u043e username.\"\"\"\n        pass\n\n    @abstractmethod\n    async def exists_by_email(self, email: str) -&gt; bool:\n        \"\"\"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u0435 email.\"\"\"\n        pass\n</code></pre>"},{"location":"architecture/repository-pattern/#3-sqlalchemy","title":"3. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f (SQLAlchemy)","text":"<pre><code>from sqlalchemy import select\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\nclass SQLAlchemyUserRepository(UserRepository):\n    \"\"\"SQLAlchemy \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f UserRepository.\"\"\"\n\n    def __init__(self, session: AsyncSession):\n        self.session = session\n\n    async def get_by_id(self, user_id: int) -&gt; Optional[User]:\n        result = await self.session.execute(\n            select(UserModel).where(UserModel.id == user_id)\n        )\n        model = result.scalar_one_or_none()\n        return self._to_entity(model) if model else None\n\n    async def get_by_email(self, email: str) -&gt; Optional[User]:\n        result = await self.session.execute(\n            select(UserModel).where(UserModel.email == email)\n        )\n        model = result.scalar_one_or_none()\n        return self._to_entity(model) if model else None\n\n    async def create(self, user: User) -&gt; User:\n        model = self._to_model(user)\n        self.session.add(model)\n        await self.session.flush()\n        return self._to_entity(model)\n\n    async def update(self, user: User) -&gt; User:\n        model = await self.session.get(UserModel, user.id)\n        if model:\n            model.username = user.username\n            model.email = user.email\n            await self.session.flush()\n        return user\n\n    async def delete(self, user_id: int) -&gt; bool:\n        model = await self.session.get(UserModel, user_id)\n        if model:\n            await self.session.delete(model)\n            return True\n        return False\n\n    def _to_entity(self, model: UserModel) -&gt; User:\n        return User(\n            id=model.id,\n            username=model.username,\n            email=model.email\n        )\n\n    def _to_model(self, entity: User) -&gt; UserModel:\n        return UserModel(\n            id=entity.id,\n            username=entity.username,\n            email=entity.email\n        )\n</code></pre>"},{"location":"architecture/repository-pattern/#4","title":"4. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432","text":"<pre><code>class InMemoryUserRepository(UserRepository):\n    \"\"\"In-memory \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432.\"\"\"\n\n    def __init__(self):\n        self._users: dict[int, User] = {}\n        self._next_id = 1\n\n    async def get_by_id(self, user_id: int) -&gt; Optional[User]:\n        return self._users.get(user_id)\n\n    async def get_by_email(self, email: str) -&gt; Optional[User]:\n        for user in self._users.values():\n            if user.email == email:\n                return user\n        return None\n\n    async def create(self, user: User) -&gt; User:\n        user.id = self._next_id\n        self._next_id += 1\n        self._users[user.id] = user\n        return user\n\n    async def update(self, user: User) -&gt; User:\n        self._users[user.id] = user\n        return user\n\n    async def delete(self, user_id: int) -&gt; bool:\n        if user_id in self._users:\n            del self._users[user_id]\n            return True\n        return False\n</code></pre>"},{"location":"architecture/repository-pattern/#_3","title":"\ud83e\uddea \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>import pytest\n\n@pytest.fixture\ndef user_repo():\n    \"\"\"In-memory \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432.\"\"\"\n    return InMemoryUserRepository()\n\n@pytest.mark.asyncio\nasync def test_create_user(user_repo):\n    user = User(id=None, username=\"john\", email=\"john@example.com\")\n\n    created = await user_repo.create(user)\n\n    assert created.id is not None\n    assert created.username == \"john\"\n\n@pytest.mark.asyncio\nasync def test_get_by_email(user_repo):\n    user = User(id=None, username=\"john\", email=\"john@example.com\")\n    await user_repo.create(user)\n\n    found = await user_repo.get_by_email(\"john@example.com\")\n\n    assert found is not None\n    assert found.username == \"john\"\n</code></pre>"},{"location":"architecture/repository-pattern/#_4","title":"\u2705 \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430","text":"\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0422\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0441\u0442\u044c In-memory \u0434\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432 \u0413\u0438\u0431\u043a\u043e\u0441\u0442\u044c \u041b\u0435\u0433\u043a\u043e \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0410\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044f \u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430 \u043d\u0435 \u0437\u043d\u0430\u0435\u0442 \u043e \u0411\u0414 Single Responsibility \u041e\u0434\u0438\u043d \u043a\u043b\u0430\u0441\u0441 = \u043e\u0434\u0438\u043d \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0434\u0430\u043d\u043d\u044b\u0445"},{"location":"architecture/repository-pattern/#_5","title":"\u26a0\ufe0f \u041a\u043e\u0433\u0434\u0430 \u041d\u0415 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c","text":"<ul> <li>\u041e\u0447\u0435\u043d\u044c \u043f\u0440\u043e\u0441\u0442\u044b\u0435 CRUD \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> <li>\u041a\u043e\u0433\u0434\u0430 ORM \u0443\u0436\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u0443\u044e \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0446\u0438\u044e</li> <li>\u041f\u0440\u043e\u0442\u043e\u0442\u0438\u043f\u044b \u0438 MVP</li> </ul>"},{"location":"architecture/state-machine/","title":"State Machine","text":"<p>\u041a\u043e\u043d\u0435\u0447\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u044b \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c.</p>"},{"location":"architecture/state-machine/#_1","title":"\ud83c\udfaf \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c","text":"<p>State Machine \u0438\u0434\u0435\u0430\u043b\u0435\u043d \u043a\u043e\u0433\u0434\u0430:</p> <ul> <li>\u041e\u0431\u044a\u0435\u043a\u0442 \u0438\u043c\u0435\u0435\u0442 \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439</li> <li>\u0415\u0441\u0442\u044c \u0447\u0451\u0442\u043a\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u043c\u0438</li> <li>\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u0441\u043e\u0431\u044b\u0442\u0438\u0439/\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439</li> <li>\u041d\u0443\u0436\u043d\u0430 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0445 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432</li> </ul> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b: \u0417\u0430\u043a\u0430\u0437\u044b, \u0437\u0430\u0434\u0430\u0447\u0438, \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b, \u043f\u043b\u0430\u0442\u0435\u0436\u0438, \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438.</p>"},{"location":"architecture/state-machine/#_2","title":"\ud83d\udcca \u041f\u0440\u0438\u043c\u0435\u0440: \u0416\u0438\u0437\u043d\u0435\u043d\u043d\u044b\u0439 \u0446\u0438\u043a\u043b \u0437\u0430\u0434\u0430\u0447\u0438","text":"<pre><code>                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  DRAFT   \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 assign\n                         \u25bc\n               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2502    AWAITING       \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n        \u2502 reject        \u2502 accept          \u2502 cancel\n        \u25bc               \u25bc                 \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 REJECTED \u2502      \u2502 ACCEPTED \u2502      \u2502 CANCELLED\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2502 complete\n                       \u25bc\n                 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                 \u2502 COMPLETED\u2502\n                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/state-machine/#_3","title":"\ud83c\udfd7\ufe0f \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f","text":""},{"location":"architecture/state-machine/#1","title":"1. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0439","text":"<pre><code>from enum import Enum\n\nclass TaskState(Enum):\n    DRAFT = \"draft\"\n    AWAITING = \"awaiting\"\n    ACCEPTED = \"accepted\"\n    COMPLETED = \"completed\"\n    REJECTED = \"rejected\"\n    CANCELLED = \"cancelled\"\n\nclass TaskEvent(Enum):\n    ASSIGN = \"assign\"\n    ACCEPT = \"accept\"\n    REJECT = \"reject\"\n    COMPLETE = \"complete\"\n    CANCEL = \"cancel\"\n</code></pre>"},{"location":"architecture/state-machine/#2","title":"2. \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432","text":"<pre><code>from dataclasses import dataclass\nfrom typing import Callable, Optional\n\n@dataclass\nclass Transition:\n    from_state: TaskState\n    to_state: TaskState\n    event: TaskEvent\n    guard: Optional[Callable] = None  # \u0423\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430\n    action: Optional[Callable] = None  # \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0435\n\nTRANSITIONS = [\n    Transition(TaskState.DRAFT, TaskState.AWAITING, TaskEvent.ASSIGN),\n    Transition(TaskState.AWAITING, TaskState.ACCEPTED, TaskEvent.ACCEPT,\n               guard=lambda ctx: ctx['user_id'] == ctx['executor_id']),\n    Transition(TaskState.AWAITING, TaskState.REJECTED, TaskEvent.REJECT),\n    Transition(TaskState.ACCEPTED, TaskState.COMPLETED, TaskEvent.COMPLETE),\n    Transition(TaskState.AWAITING, TaskState.CANCELLED, TaskEvent.CANCEL),\n    Transition(TaskState.ACCEPTED, TaskState.CANCELLED, TaskEvent.CANCEL),\n]\n</code></pre>"},{"location":"architecture/state-machine/#3-state-machine","title":"3. State Machine \u043a\u043b\u0430\u0441\u0441","text":"<pre><code>class StateMachine:\n    def __init__(self, initial_state: TaskState):\n        self.state = initial_state\n        self.transitions = {\n            (t.from_state, t.event): t for t in TRANSITIONS\n        }\n\n    def can_trigger(self, event: TaskEvent, context: dict = None) -&gt; bool:\n        \"\"\"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u043c\u043e\u0436\u043d\u043e \u043b\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0445\u043e\u0434.\"\"\"\n        key = (self.state, event)\n        transition = self.transitions.get(key)\n\n        if not transition:\n            return False\n\n        if transition.guard and context:\n            return transition.guard(context)\n\n        return True\n\n    async def trigger(self, event: TaskEvent, context: dict = None) -&gt; TaskState:\n        \"\"\"\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0445\u043e\u0434.\"\"\"\n        if not self.can_trigger(event, context):\n            raise InvalidTransitionError(\n                f\"Cannot {event.value} from {self.state.value}\"\n            )\n\n        transition = self.transitions[(self.state, event)]\n\n        # \u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c action \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c\n        if transition.action:\n            await transition.action(context)\n\n        self.state = transition.to_state\n        return self.state\n\n    def get_available_events(self) -&gt; list[TaskEvent]:\n        \"\"\"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0438\u0437 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f.\"\"\"\n        return [\n            event for (state, event) in self.transitions.keys()\n            if state == self.state\n        ]\n</code></pre>"},{"location":"architecture/state-machine/#4","title":"4. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code># \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435\ntask_sm = StateMachine(TaskState.DRAFT)\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439\navailable = task_sm.get_available_events()\n# [TaskEvent.ASSIGN]\n\n# \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430\nawait task_sm.trigger(TaskEvent.ASSIGN)\n# state = TaskState.AWAITING\n\n# \u0421 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043e\u043c (\u0434\u043b\u044f guard)\nawait task_sm.trigger(\n    TaskEvent.ACCEPT,\n    context={'user_id': 1, 'executor_id': 1}\n)\n# state = TaskState.ACCEPTED\n\n# \u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\nawait task_sm.trigger(TaskEvent.ASSIGN)\n# raises InvalidTransitionError\n</code></pre>"},{"location":"architecture/state-machine/#ui","title":"\ud83c\udfa8 UI \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f","text":""},{"location":"architecture/state-machine/#_4","title":"\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u043d\u043e\u043f\u043a\u0438","text":"<pre><code>def build_task_keyboard(task: Task, user_id: int) -&gt; InlineKeyboard:\n    \"\"\"\u0421\u0442\u0440\u043e\u0438\u043c \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432.\"\"\"\n    sm = StateMachine(TaskState(task.status))\n    context = {\n        'user_id': user_id,\n        'creator_id': task.creator_id,\n        'executor_id': task.executor_id,\n    }\n\n    buttons = []\n    for event in sm.get_available_events():\n        if sm.can_trigger(event, context):\n            buttons.append(\n                Button(text=EVENT_LABELS[event], callback=f\"{event.value}_{task.id}\")\n            )\n\n    return InlineKeyboard(buttons)\n</code></pre>"},{"location":"architecture/state-machine/#_5","title":"\u2705 \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430","text":"\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u043e \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u041f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u043e\u0441\u0442\u044c \u0422\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0414\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0430 = \u043a\u043e\u0434 \u0422\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0441\u0442\u044c \u041b\u0435\u0433\u043a\u043e \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u0420\u0430\u0441\u0448\u0438\u0440\u044f\u0435\u043c\u043e\u0441\u0442\u044c \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439/\u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0410\u0443\u0434\u0438\u0442 \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432"},{"location":"architecture/state-machine/#_6","title":"\ud83d\udcda \u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438","text":"<ul> <li>transitions \u2014 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u0430\u044f Python \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430</li> <li>python-statemachine \u2014 \u0434\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434</li> </ul>"},{"location":"python/","title":"\ud83d\udc0d Python","text":"<p>\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0438 \u0438 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043d\u0430 Python.</p>"},{"location":"python/#_1","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"\u0420\u0430\u0437\u0434\u0435\u043b \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0439 \u0433\u0430\u0439\u0434 \u043f\u043e \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 Python-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 Async \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441 asyncio SQLAlchemy Best practices \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 SQLAlchemy \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 TDD, pytest, \u043c\u043e\u043a\u0438 \u0438 \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u044b"},{"location":"python/#_2","title":"\ud83c\udfaf \u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u044b","text":"<p>Python Zen (\u0432\u044b\u0431\u043e\u0440\u043a\u0430)</p> <ul> <li>Explicit is better than implicit \u2014 \u044f\u0432\u043d\u043e\u0435 \u043b\u0443\u0447\u0448\u0435 \u043d\u0435\u044f\u0432\u043d\u043e\u0433\u043e</li> <li>Simple is better than complex \u2014 \u043f\u0440\u043e\u0441\u0442\u043e\u0435 \u043b\u0443\u0447\u0448\u0435 \u0441\u043b\u043e\u0436\u043d\u043e\u0433\u043e</li> <li>Readability counts \u2014 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0441\u0442\u044c \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435</li> <li>Errors should never pass silently \u2014 \u043e\u0448\u0438\u0431\u043a\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0437\u0430\u043c\u0430\u043b\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f</li> </ul>"},{"location":"python/#_3","title":"\ud83d\udd27 \u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b","text":"<pre><code># \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\nblack .\nisort .\n\n# \u0422\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f\nmypy src/\n\n# \u041b\u0438\u043d\u0442\u0438\u043d\u0433\nflake8 src/\n\n# \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\npytest tests/ -v --cov=src\n</code></pre>"},{"location":"python/#_4","title":"\ud83d\udce6 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0439 \u0441\u0442\u0435\u043a","text":"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 Package Manager Poetry \u0421\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0435 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438 ORM SQLAlchemy 2.0 Async-first ORM Validation Pydantic \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a Testing Pytest \u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441 \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u0430\u043c\u0438 Formatting Black + isort \u0410\u0432\u0442\u043e\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 Type Checking MyPy \u0421\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u044f"},{"location":"python/async-patterns/","title":"Async \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0432 Python","text":"<p>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441 asyncio.</p>"},{"location":"python/async-patterns/#asyncawait","title":"\ud83c\udfaf \u041e\u0441\u043d\u043e\u0432\u044b async/await","text":""},{"location":"python/async-patterns/#async","title":"\u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c async","text":"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f Async \u043d\u0443\u0436\u0435\u043d? \u041f\u043e\u0447\u0435\u043c\u0443 HTTP \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u2705 \u0414\u0430 I/O bound \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0411\u0414 \u2705 \u0414\u0430 I/O bound \u0427\u0442\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432 \u2705 \u0414\u0430 I/O bound CPU-\u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f \u274c \u041d\u0435\u0442 CPU bound (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 multiprocessing) \u041f\u0430\u043c\u044f\u0442\u044c/\u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u274c \u041d\u0435\u0442 \u041c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u043e"},{"location":"python/async-patterns/#_1","title":"\ud83d\udcdd \u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b","text":""},{"location":"python/async-patterns/#asyncawait_1","title":"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 async/await","text":"<pre><code>import asyncio\n\nasync def fetch_data(url: str) -&gt; dict:\n    \"\"\"\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445.\"\"\"\n    async with aiohttp.ClientSession() as session:\n        async with session.get(url) as response:\n            return await response.json()\n\n# \u0417\u0430\u043f\u0443\u0441\u043a\nresult = asyncio.run(fetch_data(\"https://api.example.com\"))\n</code></pre>"},{"location":"python/async-patterns/#gather","title":"\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0441 gather","text":"<pre><code>async def fetch_all(urls: list[str]) -&gt; list[dict]:\n    \"\"\"\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b.\"\"\"\n    tasks = [fetch_data(url) for url in urls]\n    results = await asyncio.gather(*tasks, return_exceptions=True)\n\n    # \u0424\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u043c \u043e\u0448\u0438\u0431\u043a\u0438\n    return [r for r in results if not isinstance(r, Exception)]\n</code></pre>"},{"location":"python/async-patterns/#_2","title":"\u0422\u0430\u0439\u043c\u0430\u0443\u0442\u044b","text":"<pre><code>async def fetch_with_timeout(url: str, timeout: float = 5.0) -&gt; dict:\n    \"\"\"\u0417\u0430\u043f\u0440\u043e\u0441 \u0441 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u043e\u043c.\"\"\"\n    try:\n        return await asyncio.wait_for(\n            fetch_data(url),\n            timeout=timeout\n        )\n    except asyncio.TimeoutError:\n        raise TimeoutError(f\"Request to {url} timed out\")\n</code></pre>"},{"location":"python/async-patterns/#context-managers","title":"\ud83d\udd04 Context Managers","text":""},{"location":"python/async-patterns/#async-context-manager","title":"Async context manager","text":"<pre><code>from contextlib import asynccontextmanager\n\n@asynccontextmanager\nasync def database_session():\n    \"\"\"Async context manager \u0434\u043b\u044f \u0441\u0435\u0441\u0441\u0438\u0438 \u0411\u0414.\"\"\"\n    session = await create_session()\n    try:\n        yield session\n        await session.commit()\n    except Exception:\n        await session.rollback()\n        raise\n    finally:\n        await session.close()\n\n# \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\nasync with database_session() as session:\n    user = await session.get(User, 1)\n</code></pre>"},{"location":"python/async-patterns/#_3","title":"\u26a0\ufe0f \u0427\u0430\u0441\u0442\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":""},{"location":"python/async-patterns/#async_1","title":"\u274c \u0411\u043b\u043e\u043a\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043a\u043e\u0434 \u0432 async","text":"<pre><code># \u041f\u041b\u041e\u0425\u041e: time.sleep \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 event loop\nasync def bad_example():\n    time.sleep(5)  # \u274c \u0411\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442 \u0432\u0441\u0451!\n\n# \u0425\u041e\u0420\u041e\u0428\u041e: asyncio.sleep \u043d\u0435 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\nasync def good_example():\n    await asyncio.sleep(5)  # \u2705 \u0414\u0440\u0443\u0433\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043c\u043e\u0433\u0443\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c\n</code></pre>"},{"location":"python/async-patterns/#await","title":"\u274c \u0417\u0430\u0431\u044b\u0442\u044c await","text":"<pre><code># \u041f\u041b\u041e\u0425\u041e: \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c coroutine, \u043d\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\nresult = fetch_data(url)  # \u274c &lt;coroutine object&gt;\n\n# \u0425\u041e\u0420\u041e\u0428\u041e\nresult = await fetch_data(url)  # \u2705 \u0424\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n</code></pre>"},{"location":"python/async-patterns/#_4","title":"\ud83d\udcda \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","text":"<ul> <li>asyncio \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f</li> <li>aiohttp</li> <li>SQLAlchemy Async</li> </ul>"},{"location":"python/development-practices/","title":"Development Practices","text":"<p>Universal development practices for modern Python projects with async-first architecture, comprehensive testing, and clean code principles.</p>"},{"location":"python/development-practices/#table-of-contents","title":"\ud83d\udccb Table of Contents","text":"<ol> <li>Development Environment Setup</li> <li>Project Structure</li> <li>Dependency Management</li> <li>Code Standards</li> <li>Development Workflow</li> <li>Tool Configuration</li> <li>Best Practices</li> </ol>"},{"location":"python/development-practices/#development-environment-setup","title":"\ud83d\udee0\ufe0f Development Environment Setup","text":""},{"location":"python/development-practices/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11+ - Modern async features and performance</li> <li>Poetry - Modern dependency management</li> <li>Git - Version control</li> <li>Docker (optional) - Containerization</li> </ul>"},{"location":"python/development-practices/#quick-setup","title":"Quick Setup","text":"<pre><code># Install Poetry\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# Create new project\npoetry new my-project\ncd my-project\n\n# Install dependencies\npoetry install\n\n# Activate virtual environment\npoetry shell\n</code></pre>"},{"location":"python/development-practices/#ide-configuration","title":"IDE Configuration","text":""},{"location":"python/development-practices/#vs-code-cursor-setup","title":"VS Code / Cursor Setup","text":"<ol> <li>Install Extensions:</li> </ol> <pre><code>{\n  \"extensions\": [\n    \"ms-python.python\",\n    \"ms-python.black-formatter\",\n    \"ms-python.flake8\",\n    \"ms-python.mypy-type-checker\",\n    \"ms-python.pytest-adapter\"\n  ]\n}\n</code></pre> <ol> <li>Create <code>.vscode/settings.json</code>:</li> </ol> <pre><code>{\n  \"python.defaultInterpreterPath\": \"./venv/bin/python\",\n  \"python.formatting.provider\": \"black\",\n  \"python.linting.enabled\": true,\n  \"python.linting.flake8Enabled\": true,\n  \"python.linting.mypyEnabled\": true,\n  \"python.testing.pytestEnabled\": true,\n  \"python.testing.pytestArgs\": [\"tests/\"],\n  \"editor.formatOnSave\": true,\n  \"editor.codeActionsOnSave\": {\n    \"source.organizeImports\": true\n  }\n}\n</code></pre>"},{"location":"python/development-practices/#project-structure","title":"\ud83d\udcc1 Project Structure","text":""},{"location":"python/development-practices/#recommended-structure","title":"Recommended Structure","text":"<pre><code>project/\n\u251c\u2500\u2500 src/                          # Source code\n\u2502   \u251c\u2500\u2500 core/                     # Business logic (framework-agnostic)\n\u2502   \u2502   \u251c\u2500\u2500 models/               # Domain models\n\u2502   \u2502   \u251c\u2500\u2500 services/             # Business services\n\u2502   \u2502   \u251c\u2500\u2500 repositories/         # Data access interfaces\n\u2502   \u2502   \u2514\u2500\u2500 exceptions/           # Custom exceptions\n\u2502   \u251c\u2500\u2500 infrastructure/           # External concerns\n\u2502   \u2502   \u251c\u2500\u2500 database/             # Database implementations\n\u2502   \u2502   \u251c\u2500\u2500 external/             # External API clients\n\u2502   \u2502   \u2514\u2500\u2500 config/               # Configuration\n\u2502   \u2514\u2500\u2500 api/                      # Interface layer\n\u2502       \u251c\u2500\u2500 web/                  # Web API (FastAPI/Flask)\n\u2502       \u251c\u2500\u2500 cli/                  # Command line interface\n\u2502       \u2514\u2500\u2500 telegram/             # Telegram bot (if applicable)\n\u251c\u2500\u2500 tests/                        # Test files\n\u2502   \u251c\u2500\u2500 unit/                     # Unit tests\n\u2502   \u251c\u2500\u2500 integration/              # Integration tests\n\u2502   \u2514\u2500\u2500 conftest.py              # Test configuration\n\u251c\u2500\u2500 docs/                         # Documentation\n\u251c\u2500\u2500 scripts/                      # Utility scripts\n\u251c\u2500\u2500 pyproject.toml               # Poetry configuration\n\u251c\u2500\u2500 pytest.ini                  # Test configuration\n\u251c\u2500\u2500 .env.example                 # Environment variables template\n\u2514\u2500\u2500 README.md                    # Project documentation\n</code></pre>"},{"location":"python/development-practices/#layer-responsibilities","title":"Layer Responsibilities","text":""},{"location":"python/development-practices/#core-layer-srccore","title":"Core Layer (<code>src/core/</code>)","text":"<ul> <li>Pure business logic - No external dependencies</li> <li>Domain models - Business entities and rules</li> <li>Services - Business operations and workflows</li> <li>Repository interfaces - Data access contracts</li> </ul>"},{"location":"python/development-practices/#infrastructure-layer-srcinfrastructure","title":"Infrastructure Layer (<code>src/infrastructure/</code>)","text":"<ul> <li>Database implementations - SQLAlchemy models and repositories</li> <li>External integrations - API clients, file systems</li> <li>Configuration - Environment and settings management</li> </ul>"},{"location":"python/development-practices/#api-layer-srcapi","title":"API Layer (<code>src/api/</code>)","text":"<ul> <li>Interface implementations - Web, CLI, or bot interfaces</li> <li>Request/response handling - Input validation and formatting</li> <li>Authentication - User authentication and authorization</li> </ul>"},{"location":"python/development-practices/#dependency-management","title":"\ud83d\udce6 Dependency Management","text":""},{"location":"python/development-practices/#poetry-configuration","title":"Poetry Configuration","text":""},{"location":"python/development-practices/#pyprojecttoml-structure","title":"<code>pyproject.toml</code> Structure","text":"<pre><code>[tool.poetry]\nname = \"my-project\"\nversion = \"0.1.0\"\ndescription = \"Project description\"\nauthors = [\"Your Name &lt;your.email@example.com&gt;\"]\nreadme = \"README.md\"\n\n[tool.poetry.dependencies]\npython = \"^3.11\"\nsqlalchemy = \"^2.0\"\nalembic = \"^1.12\"\naiosqlite = \"^0.19\"\npydantic = \"^2.0\"\npython-dotenv = \"^1.0\"\n\n[tool.poetry.group.dev.dependencies]\npytest = \"^7.4\"\npytest-asyncio = \"^0.21\"\nmypy = \"^1.5\"\nblack = \"^23.0\"\nflake8 = \"^6.0\"\nisort = \"^5.12\"\n\n[tool.poetry.scripts]\nmy-app = \"src.main:main\"\n\n[build-system]\nrequires = [\"poetry-core\"]\nbuild-backend = \"poetry.core.masonry.api\"\n\n[tool.black]\nline-length = 88\ntarget-version = ['py311']\n\n[tool.mypy]\npython_version = \"3.11\"\nstrict = true\nwarn_return_any = true\nwarn_unused_configs = true\n\n[tool.pytest.ini_options]\nasyncio_mode = \"auto\"\ntestpaths = [\"tests\"]\npython_files = [\"test_*.py\"]\npython_classes = [\"Test*\"]\npython_functions = [\"test_*\"]\n</code></pre>"},{"location":"python/development-practices/#dependency-groups","title":"Dependency Groups","text":"<pre><code># Install all dependencies\npoetry install\n\n# Install only production dependencies\npoetry install --only=main\n\n# Install with development dependencies\npoetry install --with dev\n\n# Add new dependency\npoetry add package-name\n\n# Add development dependency\npoetry add --group dev package-name\n\n# Add test dependency\npoetry add --group test package-name\n</code></pre>"},{"location":"python/development-practices/#code-standards","title":"\ud83d\udcdd Code Standards","text":""},{"location":"python/development-practices/#type-hints","title":"Type Hints","text":"<pre><code>from typing import Optional, List, Dict, Any, Union\nfrom dataclasses import dataclass\nfrom enum import Enum\n\n@dataclass\nclass User:\n    id: Optional[int]\n    username: str\n    email: str\n    is_active: bool = True\n\n    def get_display_name(self) -&gt; str:\n        return self.username.title()\n\nclass UserRole(Enum):\n    ADMIN = \"admin\"\n    USER = \"user\"\n    GUEST = \"guest\"\n\nasync def get_user_by_id(user_id: int) -&gt; Optional[User]:\n    \"\"\"Get user by ID with proper type hints.\"\"\"\n    # Implementation here\n    pass\n</code></pre>"},{"location":"python/development-practices/#asyncawait-patterns","title":"Async/Await Patterns","text":"<pre><code>import asyncio\nfrom typing import List\n\nasync def process_users(user_ids: List[int]) -&gt; List[User]:\n    \"\"\"Process multiple users concurrently.\"\"\"\n    tasks = [get_user_by_id(user_id) for user_id in user_ids]\n    users = await asyncio.gather(*tasks, return_exceptions=True)\n\n    # Filter out exceptions\n    return [user for user in users if isinstance(user, User)]\n\nasync def create_user_with_validation(user_data: Dict[str, Any]) -&gt; User:\n    \"\"\"Create user with async validation.\"\"\"\n    # Validate input\n    if not user_data.get('username'):\n        raise ValueError(\"Username is required\")\n\n    # Create user\n    user = User(\n        id=None,\n        username=user_data['username'],\n        email=user_data['email']\n    )\n\n    # Save to database\n    user_id = await user_repository.create(user)\n    user.id = user_id\n\n    return user\n</code></pre>"},{"location":"python/development-practices/#error-handling","title":"Error Handling","text":"<pre><code>class ServiceError(Exception):\n    \"\"\"Base exception for service errors.\"\"\"\n    pass\n\nclass UserNotFoundError(ServiceError):\n    \"\"\"Raised when user is not found.\"\"\"\n    pass\n\nclass ValidationError(ServiceError):\n    \"\"\"Raised when validation fails.\"\"\"\n    pass\n\nasync def get_user_safely(user_id: int) -&gt; User:\n    \"\"\"Get user with proper error handling.\"\"\"\n    try:\n        user = await user_repository.get_by_id(user_id)\n        if not user:\n            raise UserNotFoundError(f\"User {user_id} not found\")\n        return user\n    except DatabaseError as e:\n        raise ServiceError(f\"Database error: {e}\") from e\n</code></pre>"},{"location":"python/development-practices/#development-workflow","title":"\ud83d\udd04 Development Workflow","text":""},{"location":"python/development-practices/#1-feature-development-process","title":"1. Feature Development Process","text":"<pre><code># 1. Create feature branch\ngit checkout -b feature/user-authentication\n\n# 2. Write tests first (TDD)\n# Write test in tests/unit/test_user_service.py\n\n# 3. Implement feature\n# Implement in src/core/services/user_service.py\n\n# 4. Run tests\npoetry run pytest tests/unit/test_user_service.py -v\n\n# 5. Run all tests\npoetry run pytest\n\n# 6. Format and lint\npoetry run black .\npoetry run flake8 src/\npoetry run mypy src/\n\n# 7. Commit changes\ngit add .\ngit commit -m \"feat: add user authentication service\"\n\n# 8. Push and create PR\ngit push origin feature/user-authentication\n</code></pre>"},{"location":"python/development-practices/#2-test-driven-development","title":"2. Test-Driven Development","text":"<pre><code># 1. Write failing test\n@pytest.mark.asyncio\nasync def test_create_user_with_valid_data():\n    \"\"\"Test creating user with valid data.\"\"\"\n    user_data = {\n        \"username\": \"testuser\",\n        \"email\": \"test@example.com\"\n    }\n\n    user = await user_service.create_user(user_data)\n\n    assert user.username == \"testuser\"\n    assert user.email == \"test@example.com\"\n    assert user.is_active is True\n\n# 2. Run test (should fail)\npoetry run pytest tests/unit/test_user_service.py::test_create_user_with_valid_data -v\n\n# 3. Implement minimal code to pass\nasync def create_user(self, user_data: Dict[str, Any]) -&gt; User:\n    user = User(\n        id=None,\n        username=user_data[\"username\"],\n        email=user_data[\"email\"]\n    )\n    return user\n\n# 4. Run test (should pass)\npoetry run pytest tests/unit/test_user_service.py::test_create_user_with_valid_data -v\n\n# 5. Refactor and add more tests\n</code></pre>"},{"location":"python/development-practices/#3-code-review-checklist","title":"3. Code Review Checklist","text":"<ul> <li>[ ] Tests written and passing</li> <li>[ ] Type hints complete</li> <li>[ ] Error handling implemented</li> <li>[ ] Documentation updated</li> <li>[ ] Code formatted with Black</li> <li>[ ] Linting passes</li> <li>[ ] No hardcoded values</li> <li>[ ] Async/await used correctly</li> <li>[ ] Repository pattern followed</li> <li>[ ] Service layer used for business logic</li> </ul>"},{"location":"python/development-practices/#tool-configuration","title":"\u2699\ufe0f Tool Configuration","text":""},{"location":"python/development-practices/#black-code-formatting","title":"Black (Code Formatting)","text":"<pre><code># pyproject.toml\n[tool.black]\nline-length = 88\ntarget-version = ['py311']\ninclude = '\\.pyi?$'\nextend-exclude = '''\n/(\n  # directories\n  \\.eggs\n  | \\.git\n  | \\.hg\n  | \\.mypy_cache\n  | \\.tox\n  | \\.venv\n  | build\n  | dist\n)/\n'''\n</code></pre>"},{"location":"python/development-practices/#mypy-type-checking","title":"MyPy (Type Checking)","text":"<pre><code># pyproject.toml\n[tool.mypy]\npython_version = \"3.11\"\nstrict = true\nwarn_return_any = true\nwarn_unused_configs = true\ndisallow_untyped_defs = true\ndisallow_incomplete_defs = true\ncheck_untyped_defs = true\ndisallow_untyped_decorators = true\nno_implicit_optional = true\nwarn_redundant_casts = true\nwarn_unused_ignores = true\nwarn_no_return = true\nwarn_unreachable = true\nstrict_equality = true\n\n[[tool.mypy.overrides]]\nmodule = \"tests.*\"\ndisallow_untyped_defs = false\n</code></pre>"},{"location":"python/development-practices/#pytest-testing","title":"Pytest (Testing)","text":"<pre><code># pytest.ini\n[tool:pytest]\nasyncio_mode = auto\ntestpaths = tests\npython_files = test_*.py\npython_classes = Test*\npython_functions = test_*\naddopts = \n    -v\n    --tb=short\n    --strict-markers\n    --disable-warnings\n    --cov=src\n    --cov-report=term-missing\n    --cov-report=html\nmarkers =\n    unit: Unit tests\n    integration: Integration tests\n    slow: Slow tests\n</code></pre>"},{"location":"python/development-practices/#flake8-linting","title":"Flake8 (Linting)","text":"<pre><code># setup.cfg\n[flake8]\nmax-line-length = 88\nextend-ignore = E203, W503\nexclude = \n    .git,\n    __pycache__,\n    .venv,\n    venv,\n    .eggs,\n    *.egg,\n    build,\n    dist\n</code></pre>"},{"location":"python/development-practices/#best-practices","title":"\ud83c\udfaf Best Practices","text":""},{"location":"python/development-practices/#1-async-development","title":"1. Async Development","text":"<ul> <li>Always use async/await for I/O operations</li> <li>Use asyncio.gather() for concurrent operations</li> <li>Handle exceptions properly in async functions</li> <li>Use async context managers for resource management</li> </ul>"},{"location":"python/development-practices/#2-connection-pooling-database","title":"2. Connection Pooling (Database)","text":"<p>Connection pooling \u2014 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 \u0434\u043b\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445. \u041f\u0443\u043b \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0433\u043e\u0442\u043e\u0432\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, \u0438\u0437\u0431\u0435\u0433\u0430\u044f overhead \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435/\u0437\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u043f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435.</p>"},{"location":"python/development-practices/#_1","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0431\u0435\u0437 \u043f\u0443\u043b\u0430","text":"<pre><code># \u274c \u041f\u041b\u041e\u0425\u041e: \u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\nasync def get_user(user_id: int):\n    async with AsyncSession(engine) as session:  # ~50-100ms overhead\n        return await session.get(User, user_id)\n</code></pre>"},{"location":"python/development-practices/#_2","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0441 \u043f\u0443\u043b\u043e\u043c","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\n\n# \u2705 \u0425\u041e\u0420\u041e\u0428\u041e: \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0443\u043b\u0430 \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438\nengine = create_async_engine(\n    database_url,\n    pool_size=5,          # \u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n    max_overflow=10,      # \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043f\u0440\u0438 \u043f\u0438\u043a\u0430\u0445\n    pool_pre_ping=True,   # \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0436\u0438\u0432\u043e\u0441\u0442\u0438 \u043f\u0435\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c\n    pool_recycle=3600,    # \u041f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u0441\n    pool_timeout=30,      # \u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\n    echo=False,           # \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 SQL (True \u0434\u043b\u044f \u043e\u0442\u043b\u0430\u0434\u043a\u0438)\n)\n\n# \u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u0441\u0435\u0441\u0441\u0438\u0439\nasync_session_factory = sessionmaker(\n    engine, \n    class_=AsyncSession, \n    expire_on_commit=False\n)\n\n# \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\nasync def get_user(user_id: int):\n    async with async_session_factory() as session:  # \u0411\u0435\u0440\u0451\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u0443\u043b\u0430\n        return await session.get(User, user_id)\n    # \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u0432 \u043f\u0443\u043b, \u0430 \u043d\u0435 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f\n</code></pre>"},{"location":"python/development-practices/#_3","title":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0443\u043b\u0430","text":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f <code>pool_size</code> \u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f 5-10 \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 <code>max_overflow</code> \u0412\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441\u0432\u0435\u0440\u0445 pool_size pool_size \u00d7 2 <code>pool_pre_ping</code> \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0412\u0441\u0435\u0433\u0434\u0430 <code>True</code> <code>pool_recycle</code> \u0412\u0440\u0435\u043c\u044f \u0436\u0438\u0437\u043d\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f (\u0441\u0435\u043a\u0443\u043d\u0434\u044b) 3600 (1 \u0447\u0430\u0441) <code>pool_timeout</code> \u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f 30 \u0441\u0435\u043a\u0443\u043d\u0434"},{"location":"python/development-practices/#_4","title":"\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433 \u043f\u0443\u043b\u0430","text":"<pre><code>from sqlalchemy import event\n\n@event.listens_for(engine.sync_engine, \"checkout\")\ndef receive_checkout(dbapi_connection, connection_record, connection_proxy):\n    \"\"\"\u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0438\u0437 \u043f\u0443\u043b\u0430.\"\"\"\n    logger.debug(f\"Connection checked out: {connection_record}\")\n\n@event.listens_for(engine.sync_engine, \"checkin\")\ndef receive_checkin(dbapi_connection, connection_record):\n    \"\"\"\u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0432 \u043f\u0443\u043b.\"\"\"\n    logger.debug(f\"Connection returned to pool: {connection_record}\")\n\n# \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u0443\u043b\u0430\npool_status = engine.pool.status()\nlogger.info(f\"Pool size: {engine.pool.size()}, Checked out: {engine.pool.checkedout()}\")\n</code></pre>"},{"location":"python/development-practices/#_5","title":"\u041f\u0440\u0430\u0432\u0438\u043b\u0430","text":"<ul> <li>\u2705 \u0412\u0441\u0435\u0433\u0434\u0430 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u043f\u0443\u043b \u0441 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0434\u043d\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438</li> <li>\u2705 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>pool_pre_ping=True</code> \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u043a\u0448\u0435\u043d\u0430</li> <li>\u2705 \u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u0443\u043b\u0430 \u0432 production</li> <li>\u274c \u041d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0432 \u043e\u0431\u0445\u043e\u0434 \u043f\u0443\u043b\u0430</li> <li>\u274c \u041d\u0435 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 pool_size (\u0440\u0438\u0441\u043a \u043f\u0435\u0440\u0435\u0433\u0440\u0443\u0437\u043a\u0438 \u0411\u0414)</li> </ul>"},{"location":"python/development-practices/#3-dependency-lifecycle-management","title":"3. Dependency Lifecycle Management","text":"<p>\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0442\u0442\u0435\u0440\u043d \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0436\u0438\u0437\u043d\u0438. \u041f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u043a \u043b\u044e\u0431\u043e\u043c\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \u0441 \u0431\u0430\u0437\u043e\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 (web-\u0441\u0435\u0440\u0432\u0435\u0440\u044b, \u0431\u043e\u0442\u044b, \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b, CLI-\u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b).</p>"},{"location":"python/development-practices/#_6","title":"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430","text":"<pre><code># \u274c \u041f\u041b\u041e\u0425\u041e: \u0421\u043e\u0437\u0434\u0430\u0451\u043c \u0412\u0421\u0401 \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441\nasync def handle_request(request):\n    http_client = HttpClient()           # \u0422\u044f\u0436\u0451\u043b\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u2014 \u0437\u0430\u043d\u043e\u0432\u043e\n    config = load_config()               # \u0427\u0438\u0442\u0430\u0435\u043c \u0444\u0430\u0439\u043b \u2014 \u0437\u0430\u043d\u043e\u0432\u043e  \n    db_session = create_session()        # OK \u2014 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u0432\u0435\u0436\u0438\u043c\n    user_repo = UserRepository(session)  # OK \u2014 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d \u043a \u0441\u0435\u0441\u0441\u0438\u0438\n    email_sender = EmailSender()         # \u0422\u044f\u0436\u0451\u043b\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u2014 \u0437\u0430\u043d\u043e\u0432\u043e\n    ...\n</code></pre>"},{"location":"python/development-practices/#scope","title":"\u0420\u0435\u0448\u0435\u043d\u0438\u0435: \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u043e Scope","text":"<pre><code># \u2705 \u0425\u041e\u0420\u041e\u0428\u041e: \u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0435\u043c \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0436\u0438\u0437\u043d\u0438\n\n# \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n# APPLICATION SCOPE (Singleton) \u2014 \u0441\u043e\u0437\u0434\u0430\u0451\u043c \u041e\u0414\u0418\u041d \u0440\u0430\u0437 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435\n# \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nclass Application:\n    def __init__(self):\n        # \u0412\u043d\u0435\u0448\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0438 \u0430\u0434\u0430\u043f\u0442\u0435\u0440\u044b\n        self.http_client = HttpClient(timeout=30)\n        self.email_sender = EmailSender(smtp_config)\n        self.telegram_adapter = TelegramAdapter(token)\n\n        # \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f\n        self.config = load_config()\n        self.feature_flags = FeatureFlags()\n\n        # Connection pools (\u041d\u0415 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f!)\n        self.db_engine = create_async_engine(url, pool_size=5)\n        self.redis_pool = Redis.from_url(redis_url)\n\n        # Stateless \u0441\u0435\u0440\u0432\u0438\u0441\u044b\n        self.notification_service = NotificationService(self.email_sender)\n        self.metrics = MetricsCollector()\n\n# \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n# REQUEST SCOPE \u2014 \u0441\u043e\u0437\u0434\u0430\u0451\u043c \u041d\u0410 \u041a\u0410\u0416\u0414\u042b\u0419 \u0437\u0430\u043f\u0440\u043e\u0441\n# \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\nasync def handle_request(request, app: Application):\n    # Database session (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e per-request!)\n    async with app.db_engine.session() as session:\n        # Repositories (\u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u043a \u0441\u0435\u0441\u0441\u0438\u0438)\n        user_repo = UserRepository(session)\n        order_repo = OrderRepository(session)\n\n        # Services \u0441 \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438\n        user_service = UserService(\n            user_repo=user_repo,                    # Request-scoped\n            notification=app.notification_service,  # App-scoped (reuse!)\n        )\n\n        # \u0411\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0430\n        result = await user_service.process(request)\n        await session.commit()\n\n    return result\n</code></pre>"},{"location":"python/development-practices/#_7","title":"\u041a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432","text":"Scope \u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u041a\u043e\u0433\u0434\u0430 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c Application HTTP/API \u043a\u043b\u0438\u0435\u043d\u0442\u044b, Email/SMS senders, Message queue clients, Config, Loggers, Connection pools, Stateless services \u041f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f Request DB Session, Repositories/DAOs, Unit of Work, User context, Transaction, Request-specific cache \u041d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"},{"location":"python/development-practices/#dependency-container","title":"\u041f\u0430\u0442\u0442\u0435\u0440\u043d: Dependency Container","text":"<pre><code>from dataclasses import dataclass\nfrom typing import Optional\n\n@dataclass\nclass AppContainer:\n    \"\"\"Application-scoped dependencies (singleton).\"\"\"\n    config: Config\n    db_engine: AsyncEngine\n    http_client: HttpClient\n    notification_service: NotificationService\n    metrics: MetricsCollector\n\n@dataclass  \nclass RequestContainer:\n    \"\"\"Request-scoped dependencies.\"\"\"\n    session: AsyncSession\n    user_repo: UserRepository\n    task_repo: TaskRepository\n    current_user: Optional[User] = None\n\nclass DependencyManager:\n    def __init__(self):\n        self._app: Optional[AppContainer] = None\n\n    def initialize(self, config: Config) -&gt; None:\n        \"\"\"Call once at application startup.\"\"\"\n        self._app = AppContainer(\n            config=config,\n            db_engine=create_async_engine(config.db_url),\n            http_client=HttpClient(),\n            notification_service=NotificationService(),\n            metrics=MetricsCollector(),\n        )\n\n    @asynccontextmanager\n    async def request_scope(self):\n        \"\"\"Create request-scoped container.\"\"\"\n        async with self._app.db_engine.session() as session:\n            yield RequestContainer(\n                session=session,\n                user_repo=UserRepository(session),\n                task_repo=TaskRepository(session),\n            )\n\n# \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\ndeps = DependencyManager()\ndeps.initialize(config)\n\nasync def handle_request():\n    async with deps.request_scope() as req:\n        user = await req.user_repo.get_by_id(1)\n        # req.session \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043a\u0440\u043e\u0435\u0442\u0441\u044f\n</code></pre>"},{"location":"python/development-practices/#_8","title":"\u041f\u0440\u0430\u0432\u0438\u043b\u0430","text":"<ul> <li>\u2705 \u0412\u0441\u0435\u0433\u0434\u0430 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u0443\u0439 scope \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438</li> <li>\u2705 Application-scoped \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c thread-safe / async-safe</li> <li>\u2705 Request-scoped \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430</li> <li>\u2705 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 Dependency Injection \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 app-scoped \u0432 request-scoped</li> <li>\u274c \u041d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0445\u0440\u0430\u043d\u0438 request-scoped \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0432 application-scoped</li> <li>\u274c \u041d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0439 \u0442\u044f\u0436\u0451\u043b\u044b\u0435 stateless \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441</li> <li>\u274c \u041d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u043f\u0435\u0440\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 DB session \u043c\u0435\u0436\u0434\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438</li> </ul>"},{"location":"python/development-practices/#_9","title":"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u043e\u0441\u0442\u044c","text":"<p>\u042d\u0442\u043e\u0442 \u043f\u0430\u0442\u0442\u0435\u0440\u043d \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u0435\u043d \u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0432:</p> \u0422\u0438\u043f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f Application Scope Request Scope Web API (FastAPI, Django) App startup Per HTTP request Telegram/Discord \u0431\u043e\u0442\u044b Bot startup Per message/callback CLI \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b Script startup Per command execution Background workers Worker startup Per job/task \u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b Service startup Per RPC call"},{"location":"python/development-practices/#4-repository-pattern","title":"4. Repository Pattern","text":"<pre><code>from abc import ABC, abstractmethod\nfrom typing import Generic, TypeVar, Optional, List\n\nT = TypeVar('T')\n\nclass Repository(ABC, Generic[T]):\n    @abstractmethod\n    async def create(self, entity: T) -&gt; int:\n        \"\"\"Create entity and return ID.\"\"\"\n        pass\n\n    @abstractmethod\n    async def get_by_id(self, entity_id: int) -&gt; Optional[T]:\n        \"\"\"Get entity by ID.\"\"\"\n        pass\n\n    @abstractmethod\n    async def update(self, entity: T) -&gt; None:\n        \"\"\"Update entity.\"\"\"\n        pass\n\n    @abstractmethod\n    async def delete(self, entity_id: int) -&gt; None:\n        \"\"\"Delete entity by ID.\"\"\"\n        pass\n</code></pre>"},{"location":"python/development-practices/#5-service-layer","title":"5. Service Layer","text":"<pre><code>class UserService:\n    def __init__(self, user_repository: Repository[User]):\n        self.user_repository = user_repository\n\n    async def create_user(self, user_data: Dict[str, Any]) -&gt; User:\n        \"\"\"Create user with business logic validation.\"\"\"\n        # Validate business rules\n        if await self.user_exists(user_data['username']):\n            raise UserAlreadyExistsError(f\"User {user_data['username']} already exists\")\n\n        # Create user\n        user = User(\n            id=None,\n            username=user_data['username'],\n            email=user_data['email']\n        )\n\n        # Save to repository\n        user_id = await self.user_repository.create(user)\n        user.id = user_id\n\n        return user\n\n    async def user_exists(self, username: str) -&gt; bool:\n        \"\"\"Check if user exists.\"\"\"\n        user = await self.user_repository.get_by_username(username)\n        return user is not None\n</code></pre>"},{"location":"python/development-practices/#6-error-handling","title":"6. Error Handling","text":"<pre><code>class ServiceError(Exception):\n    \"\"\"Base exception for service errors.\"\"\"\n    pass\n\nclass UserNotFoundError(ServiceError):\n    \"\"\"User not found error.\"\"\"\n    pass\n\nclass ValidationError(ServiceError):\n    \"\"\"Validation error.\"\"\"\n    pass\n\n# Usage\nasync def get_user(user_id: int) -&gt; User:\n    try:\n        user = await user_repository.get_by_id(user_id)\n        if not user:\n            raise UserNotFoundError(f\"User {user_id} not found\")\n        return user\n    except DatabaseError as e:\n        raise ServiceError(f\"Database error: {e}\") from e\n</code></pre>"},{"location":"python/development-practices/#7-configuration-management","title":"7. Configuration Management","text":"<pre><code>from pydantic import BaseSettings\nfrom typing import Optional\n\nclass Settings(BaseSettings):\n    database_url: str\n    secret_key: str\n    debug: bool = False\n    log_level: str = \"INFO\"\n\n    class Config:\n        env_file = \".env\"\n        env_file_encoding = \"utf-8\"\n\n# Usage\nsettings = Settings()\n</code></pre>"},{"location":"python/development-practices/#getting-started-checklist","title":"\ud83d\ude80 Getting Started Checklist","text":""},{"location":"python/development-practices/#day-1-environment-setup","title":"Day 1: Environment Setup","text":"<ul> <li>[ ] Install Python 3.11+</li> <li>[ ] Install Poetry</li> <li>[ ] Set up IDE with extensions</li> <li>[ ] Create project structure</li> <li>[ ] Configure tools (Black, MyPy, Pytest)</li> </ul>"},{"location":"python/development-practices/#day-2-first-feature","title":"Day 2: First Feature","text":"<ul> <li>[ ] Write feature description</li> <li>[ ] Create test for user scenario</li> <li>[ ] Implement core functionality</li> <li>[ ] Add integration tests</li> <li>[ ] Document changes</li> </ul>"},{"location":"python/development-practices/#day-3-advanced-patterns","title":"Day 3: Advanced Patterns","text":"<ul> <li>[ ] Implement repository pattern</li> <li>[ ] Add service layer</li> <li>[ ] Create comprehensive error handling</li> <li>[ ] Write end-to-end tests</li> <li>[ ] Set up CI/CD pipeline</li> </ul> <p>This development guide provides a solid foundation for building modern Python applications with async-first architecture, comprehensive testing, and clean code principles.</p>"},{"location":"python/sqlalchemy/","title":"SQLAlchemy Best Practices","text":"<p>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 SQLAlchemy 2.0 \u0432 async \u0440\u0435\u0436\u0438\u043c\u0435.</p>"},{"location":"python/sqlalchemy/#connection-pooling","title":"\ud83d\udd0c Connection Pooling","text":"<p>\u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0430\u0436\u043d\u043e</p> <p>Connection pooling \u2014 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 \u0434\u043b\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441 \u0411\u0414!</p>"},{"location":"python/sqlalchemy/#_1","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0443\u043b\u0430","text":"<pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\n\nengine = create_async_engine(\n    \"sqlite+aiosqlite:///app.db\",\n    pool_size=5,          # \u0411\u0430\u0437\u043e\u0432\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439\n    max_overflow=10,      # \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0438 \u043f\u0438\u043a\u0430\u0445\n    pool_pre_ping=True,   # \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0436\u0438\u0432\u043e\u0441\u0442\u0438\n    pool_recycle=3600,    # \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u0441\n    pool_timeout=30,      # \u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f\n)\n\nasync_session_factory = sessionmaker(\n    engine,\n    class_=AsyncSession,\n    expire_on_commit=False\n)\n</code></pre>"},{"location":"python/sqlalchemy/#_2","title":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0435","text":"\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 pool_size max_overflow \u041d\u0438\u0437\u043a\u0430\u044f (&lt;100 users) 3-5 5 \u0421\u0440\u0435\u0434\u043d\u044f\u044f (100-1000) 5-10 10-15 \u0412\u044b\u0441\u043e\u043a\u0430\u044f (1000+) 10-20 20-30"},{"location":"python/sqlalchemy/#_3","title":"\ud83d\udcca \u041c\u043e\u0434\u0435\u043b\u0438","text":""},{"location":"python/sqlalchemy/#_4","title":"\u0411\u0430\u0437\u043e\u0432\u0430\u044f \u043c\u043e\u0434\u0435\u043b\u044c","text":"<pre><code>from sqlalchemy import Column, Integer, String, DateTime, ForeignKey\nfrom sqlalchemy.orm import relationship, declarative_base\nfrom sqlalchemy.sql import func\n\nBase = declarative_base()\n\nclass User(Base):\n    __tablename__ = \"users\"\n\n    id = Column(Integer, primary_key=True, index=True)\n    username = Column(String(255), unique=True, nullable=False)\n    email = Column(String(255), nullable=False)\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), onupdate=func.now())\n\n    # Relationships\n    tasks = relationship(\"Task\", back_populates=\"creator\")\n</code></pre>"},{"location":"python/sqlalchemy/#_5","title":"\ud83d\udd0d \u0417\u0430\u043f\u0440\u043e\u0441\u044b","text":""},{"location":"python/sqlalchemy/#_6","title":"\u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":"<pre><code>from sqlalchemy import select\nfrom sqlalchemy.orm import selectinload\n\nasync def get_user(session: AsyncSession, user_id: int) -&gt; User | None:\n    result = await session.execute(\n        select(User).where(User.id == user_id)\n    )\n    return result.scalar_one_or_none()\n\nasync def get_users_with_tasks(session: AsyncSession) -&gt; list[User]:\n    \"\"\"Eager loading \u0434\u043b\u044f \u0438\u0437\u0431\u0435\u0436\u0430\u043d\u0438\u044f N+1.\"\"\"\n    result = await session.execute(\n        select(User).options(selectinload(User.tasks))\n    )\n    return list(result.scalars().all())\n</code></pre>"},{"location":"python/sqlalchemy/#_7","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f","text":"<pre><code>from sqlalchemy import and_, or_\n\nasync def search_users(\n    session: AsyncSession,\n    query: str,\n    is_active: bool = True\n) -&gt; list[User]:\n    result = await session.execute(\n        select(User).where(\n            and_(\n                User.is_active == is_active,\n                or_(\n                    User.username.ilike(f\"%{query}%\"),\n                    User.email.ilike(f\"%{query}%\")\n                )\n            )\n        )\n    )\n    return list(result.scalars().all())\n</code></pre>"},{"location":"python/sqlalchemy/#_8","title":"\u26a0\ufe0f \u0427\u0430\u0441\u0442\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":""},{"location":"python/sqlalchemy/#n1","title":"N+1 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430","text":"<pre><code># \u274c \u041f\u041b\u041e\u0425\u041e: N+1 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432\nusers = await session.execute(select(User))\nfor user in users.scalars():\n    print(user.tasks)  # \u041a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043d\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441!\n\n# \u2705 \u0425\u041e\u0420\u041e\u0428\u041e: \u041e\u0434\u0438\u043d \u0437\u0430\u043f\u0440\u043e\u0441 \u0441 eager loading\nusers = await session.execute(\n    select(User).options(selectinload(User.tasks))\n)\n</code></pre>"},{"location":"python/sqlalchemy/#_9","title":"\u0414\u043e\u043b\u0433\u043e\u0436\u0438\u0432\u0443\u0449\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438","text":"<pre><code># \u274c \u041f\u041b\u041e\u0425\u041e: \u041e\u0434\u043d\u0430 \u0441\u0435\u0441\u0441\u0438\u044f \u043d\u0430 \u0432\u0441\u0451 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435\nsession = AsyncSession(engine)  # \u0421\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435\n\n# \u2705 \u0425\u041e\u0420\u041e\u0428\u041e: \u0421\u0435\u0441\u0441\u0438\u044f \u043d\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\nasync with async_session_factory() as session:\n    # \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u0441 \u0411\u0414\n    await session.commit()\n# \u0421\u0435\u0441\u0441\u0438\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f\n</code></pre>"},{"location":"python/sqlalchemy/#_10","title":"\ud83d\udcda \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","text":"<ul> <li>SQLAlchemy 2.0 Docs</li> <li>Async SQLAlchemy</li> </ul>"},{"location":"python/testing/","title":"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 Python","text":"<p>TDD, pytest, \u043c\u043e\u043a\u0438 \u0438 \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u044b.</p>"},{"location":"python/testing/#test-driven-development-tdd","title":"\ud83c\udfaf Test-Driven Development (TDD)","text":""},{"location":"python/testing/#red-green-refactor","title":"\u0426\u0438\u043a\u043b Red-Green-Refactor","text":"<pre><code>1. \ud83d\udd34 RED    \u2014 \u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u0430\u0434\u0430\u044e\u0449\u0438\u0439 \u0442\u0435\u0441\u0442\n2. \ud83d\udfe2 GREEN \u2014 \u041d\u0430\u043f\u0438\u0448\u0438 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434 \u0434\u043b\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f\n3. \ud83d\udd35 REFACTOR \u2014 \u0423\u043b\u0443\u0447\u0448\u0438 \u043a\u043e\u0434, \u0442\u0435\u0441\u0442\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442\u044c\n</code></pre>"},{"location":"python/testing/#tdd","title":"\u041f\u0440\u0438\u043c\u0435\u0440 TDD","text":"<pre><code># 1. \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0442\u0435\u0441\u0442 (\u043f\u0430\u0434\u0430\u0435\u0442)\ndef test_calculate_discount():\n    assert calculate_discount(100, 10) == 90\n\n# 2. \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f\ndef calculate_discount(price: float, percent: float) -&gt; float:\n    return price - (price * percent / 100)\n\n# 3. \u0420\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433 (\u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u0435\u043d)\ndef calculate_discount(price: float, percent: float) -&gt; float:\n    \"\"\"Calculate price after discount.\"\"\"\n    discount = price * percent / 100\n    return round(price - discount, 2)\n</code></pre>"},{"location":"python/testing/#pytest","title":"\ud83e\uddea Pytest","text":""},{"location":"python/testing/#_1","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0442\u0435\u0441\u0442\u043e\u0432","text":"<pre><code>tests/\n\u251c\u2500\u2500 conftest.py          # \u041e\u0431\u0449\u0438\u0435 \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u044b\n\u251c\u2500\u2500 unit/\n\u2502   \u251c\u2500\u2500 test_services.py\n\u2502   \u2514\u2500\u2500 test_models.py\n\u251c\u2500\u2500 integration/\n\u2502   \u2514\u2500\u2500 test_database.py\n\u2514\u2500\u2500 e2e/\n    \u2514\u2500\u2500 test_workflows.py\n</code></pre>"},{"location":"python/testing/#_2","title":"\u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u0442\u0435\u0441\u0442","text":"<pre><code>import pytest\n\ndef test_user_creation():\n    \"\"\"Test creating a new user.\"\"\"\n    user = User(username=\"john\", email=\"john@example.com\")\n\n    assert user.username == \"john\"\n    assert user.email == \"john@example.com\"\n    assert user.is_active is True  # Default value\n</code></pre>"},{"location":"python/testing/#async","title":"Async \u0442\u0435\u0441\u0442\u044b","text":"<pre><code>import pytest\n\n@pytest.mark.asyncio\nasync def test_fetch_user():\n    \"\"\"Test async user fetching.\"\"\"\n    user = await user_service.get_by_id(1)\n\n    assert user is not None\n    assert user.id == 1\n</code></pre>"},{"location":"python/testing/#_3","title":"\ud83d\udce6 \u0424\u0438\u043a\u0441\u0442\u0443\u0440\u044b","text":""},{"location":"python/testing/#_4","title":"\u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u044b","text":"<pre><code># conftest.py\nimport pytest\n\n@pytest.fixture\ndef sample_user():\n    \"\"\"Create a sample user for testing.\"\"\"\n    return User(\n        id=1,\n        username=\"testuser\",\n        email=\"test@example.com\"\n    )\n\n@pytest.fixture\nasync def db_session():\n    \"\"\"Create async database session.\"\"\"\n    async with async_session_factory() as session:\n        yield session\n        await session.rollback()\n</code></pre>"},{"location":"python/testing/#_5","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0438\u043a\u0441\u0442\u0443\u0440","text":"<pre><code>def test_user_display_name(sample_user):\n    \"\"\"Test using fixture.\"\"\"\n    assert sample_user.display_name == \"Testuser\"\n\n@pytest.mark.asyncio\nasync def test_save_user(db_session, sample_user):\n    \"\"\"Test with multiple fixtures.\"\"\"\n    db_session.add(sample_user)\n    await db_session.commit()\n\n    saved = await db_session.get(User, sample_user.id)\n    assert saved is not None\n</code></pre>"},{"location":"python/testing/#_6","title":"\ud83c\udfad \u041c\u043e\u043a\u0438","text":""},{"location":"python/testing/#_7","title":"\u041c\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439","text":"<pre><code>from unittest.mock import AsyncMock, MagicMock, patch\n\n@pytest.mark.asyncio\nasync def test_send_notification():\n    \"\"\"Test with mocked external service.\"\"\"\n    # \u0421\u043e\u0437\u0434\u0430\u0451\u043c \u043c\u043e\u043a\n    mock_sender = AsyncMock()\n    mock_sender.send.return_value = True\n\n    service = NotificationService(sender=mock_sender)\n    result = await service.notify_user(user_id=1, message=\"Hello\")\n\n    assert result is True\n    mock_sender.send.assert_called_once()\n\n@pytest.mark.asyncio\nasync def test_with_patch():\n    \"\"\"Test with patch decorator.\"\"\"\n    with patch('app.services.email.send_email', new_callable=AsyncMock) as mock:\n        mock.return_value = True\n\n        result = await user_service.send_welcome_email(user_id=1)\n\n        assert result is True\n        mock.assert_called_once()\n</code></pre>"},{"location":"python/testing/#_8","title":"\ud83d\udcca \u041f\u043e\u043a\u0440\u044b\u0442\u0438\u0435 \u043a\u043e\u0434\u0430","text":"<pre><code># \u0417\u0430\u043f\u0443\u0441\u043a \u0441 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435\u043c\npytest --cov=app --cov-report=html\n\n# \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043a\u0440\u044b\u0442\u0438\u0435\npytest --cov=app --cov-fail-under=80\n</code></pre>"},{"location":"python/testing/#pytestini","title":"pytest.ini","text":"<pre><code>[pytest]\nasyncio_mode = auto\ntestpaths = tests\npython_files = test_*.py\npython_classes = Test*\npython_functions = test_*\naddopts = -v --tb=short --cov=app --cov-report=term-missing\n</code></pre>"},{"location":"python/testing/#_9","title":"\u2705 \u0427\u0435\u043a\u043b\u0438\u0441\u0442 \u0445\u043e\u0440\u043e\u0448\u0435\u0433\u043e \u0442\u0435\u0441\u0442\u0430","text":"<ul> <li>[ ] \u0422\u0435\u0441\u0442 \u0438\u043c\u0435\u0435\u0442 \u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435</li> <li>[ ] \u041e\u0434\u0438\u043d \u0442\u0435\u0441\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043e\u0434\u043d\u0443 \u0432\u0435\u0449\u044c</li> <li>[ ] \u0422\u0435\u0441\u0442 \u0438\u0437\u043e\u043b\u0438\u0440\u043e\u0432\u0430\u043d (\u043d\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445)</li> <li>[ ] \u0422\u0435\u0441\u0442 \u0434\u0435\u0442\u0435\u0440\u043c\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d (\u0432\u0441\u0435\u0433\u0434\u0430 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442)</li> <li>[ ] \u0422\u0435\u0441\u0442 \u0431\u044b\u0441\u0442\u0440\u044b\u0439</li> <li>[ ] \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0444\u0438\u043a\u0441\u0442\u0443\u0440\u044b \u0434\u043b\u044f setup</li> <li>[ ] \u041c\u043e\u043a\u0438 \u0434\u043b\u044f \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439</li> </ul>"},{"location":"telegram-bots/","title":"\ud83e\udd16 Telegram \u0431\u043e\u0442\u044b","text":"<p>\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 Telegram \u0431\u043e\u0442\u043e\u0432 \u043d\u0430 Python.</p>"},{"location":"telegram-bots/#_1","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"\u0420\u0430\u0437\u0434\u0435\u043b \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u041f\u043e\u0434\u0445\u043e\u0434 \u043a \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u0438\u0441\u0442\u0438\u0447\u043d\u044b\u0439 workflow-centric \u043f\u043e\u0434\u0445\u043e\u0434 UI \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b Inline keyboards, \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f, callback data"},{"location":"telegram-bots/#_2","title":"\ud83d\udee0\ufe0f \u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0442\u0435\u043a","text":"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f \u0410\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u044b \u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 python-telegram-bot aiogram, Telethon \u0411\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 SQLAlchemy + aiosqlite/asyncpg \u2014 \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f Pydantic dataclasses \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f python-dotenv pydantic-settings"},{"location":"telegram-bots/#_3","title":"\ud83c\udfd7\ufe0f \u0422\u0438\u043f\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430","text":"<pre><code>bot-project/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 adapters/          # Telegram API adapter\n\u2502   \u251c\u2500\u2500 core/              # Config, logging\n\u2502   \u251c\u2500\u2500 domain/            # Entities, state machine\n\u2502   \u251c\u2500\u2500 flows/             # User workflows\n\u2502   \u251c\u2500\u2500 infrastructure/    # Database, models\n\u2502   \u251c\u2500\u2500 ops/               # Business operations\n\u2502   \u251c\u2500\u2500 repositories/      # Data access\n\u2502   \u251c\u2500\u2500 services/          # Business services\n\u2502   \u2514\u2500\u2500 ui/                # Keyboards, templates\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 .env.example\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"telegram-bots/#_4","title":"\ud83c\udfaf \u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b","text":""},{"location":"telegram-bots/#workflow-centric-design","title":"Workflow-Centric Design","text":"<p>\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0443\u0439 \u043a\u043e\u0434 \u0432\u043e\u043a\u0440\u0443\u0433 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432, \u0430 \u043d\u0435 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439:</p> <pre><code>class TaskCreationFlow:\n    \"\"\"\u041f\u043e\u043b\u043d\u044b\u0439 \u0446\u0438\u043a\u043b \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u0434\u0430\u0447\u0438.\"\"\"\n\n    async def start(self, message):\n        # 1. \u041f\u0430\u0440\u0441\u0438\u043d\u0433 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\n        # 2. \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f\n        # 3. \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432 \u0411\u0414\n        # 4. \u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\n        # 5. UI feedback\n</code></pre>"},{"location":"telegram-bots/#state-machine","title":"State Machine \u0434\u043b\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u043c\u0438:</p> <pre><code>class TaskState(Enum):\n    DRAFT = \"draft\"\n    AWAITING = \"awaiting_acceptance\"\n    ACCEPTED = \"accepted\"\n    COMPLETED = \"completed\"\n    CANCELLED = \"cancelled\"\n</code></pre>"},{"location":"telegram-bots/#emoji","title":"Emoji \u043a\u0430\u043a \u0438\u043d\u0434\u0438\u043a\u0430\u0442\u043e\u0440\u044b \u0441\u0442\u0430\u0442\u0443\u0441\u0430","text":"\u0421\u0442\u0430\u0442\u0443\u0441 Emoji \u041e\u0436\u0438\u0434\u0430\u0435\u0442 \ud83d\udfe1 \u0412 \u0440\u0430\u0431\u043e\u0442\u0435 \ud83d\udfe2 \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e \u2705 \u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e \u274c \u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e \ud83d\udeab"},{"location":"telegram-bots/#quick-start","title":"\u26a1 Quick Start","text":"<pre><code># 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u043e\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 @BotFather \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d\n\n# 2. \u0421\u043e\u0437\u0434\u0430\u0442\u044c .env \u0444\u0430\u0439\u043b\necho \"TELEGRAM_BOT_TOKEN=your_token_here\" &gt; .env\n\n# 3. \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438\npip install python-telegram-bot sqlalchemy aiosqlite python-dotenv\n\n# 4. \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c\npython -m app.bot_app\n</code></pre>"},{"location":"telegram-bots/#_5","title":"\ud83d\udcda \u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u044b","text":"<ul> <li>Clean Architecture \u2014 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f</li> <li>State Machine \u2014 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c</li> <li>Repository Pattern \u2014 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0434\u0430\u043d\u043d\u044b\u043c</li> <li>Dependency Lifecycle \u2014 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438</li> <li>SQLAlchemy \u2014 \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 \u0411\u0414</li> <li>Async \u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u2014 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u043a\u043e\u0434</li> </ul>"},{"location":"telegram-bots/development-approach/","title":"KS Task Bot - Development Approach","text":""},{"location":"telegram-bots/development-approach/#overview","title":"Overview","text":"<p>This document outlines the minimalist development approach for rebuilding the KS Task Bot from scratch, focusing on minimal viable code, clear architecture, and incremental development.</p>"},{"location":"telegram-bots/development-approach/#core-development-principles","title":"Core Development Principles","text":""},{"location":"telegram-bots/development-approach/#1-minimalist-philosophy","title":"1. Minimalist Philosophy","text":"<ul> <li>Minimum Viable Code: Only implement what's absolutely necessary</li> <li>Progressive Enhancement: Start simple, add complexity gradually</li> <li>YAGNI Principle: You Aren't Gonna Need It - avoid over-engineering</li> <li>KISS Principle: Keep It Simple, Stupid</li> </ul>"},{"location":"telegram-bots/development-approach/#2-workflow-centric-development","title":"2. Workflow-Centric Development","text":"<ul> <li>User Journeys First: Build complete workflows, not isolated features</li> <li>End-to-End Thinking: Consider the full user experience</li> <li>Context-Driven: Everything revolves around user context</li> <li>Composition over Inheritance: Build complex behavior from simple parts</li> </ul>"},{"location":"telegram-bots/development-approach/#3-test-driven-development-tdd","title":"3. Test-Driven Development (TDD)","text":"<ul> <li>Tests First: Write tests before implementation</li> <li>Red-Green-Refactor: Test \u2192 Implement \u2192 Refactor cycle</li> <li>Living Documentation: Tests serve as executable documentation</li> <li>Confidence in Changes: Tests enable safe refactoring</li> </ul>"},{"location":"telegram-bots/development-approach/#minimal-code-structure","title":"Minimal Code Structure","text":""},{"location":"telegram-bots/development-approach/#1-core-python-files-minimum-viable","title":"1. Core Python Files (Minimum Viable)","text":""},{"location":"telegram-bots/development-approach/#mainpy-entry-point","title":"<code>main.py</code> - Entry Point","text":"<pre><code># Single file entry point\n# ~50 lines maximum\n# Handles: Bot initialization, error handling, graceful shutdown\n</code></pre>"},{"location":"telegram-bots/development-approach/#botpy-bot-application","title":"<code>bot.py</code> - Bot Application","text":"<pre><code># Core bot logic\n# ~100 lines maximum\n# Handles: Message routing, command processing, callback handling\n</code></pre>"},{"location":"telegram-bots/development-approach/#flowspy-user-workflows","title":"<code>flows.py</code> - User Workflows","text":"<pre><code># Complete user journeys\n# ~200 lines maximum\n# Handles: Task creation, task execution, user management\n</code></pre>"},{"location":"telegram-bots/development-approach/#opspy-business-operations","title":"<code>ops.py</code> - Business Operations","text":"<pre><code># Business logic and data operations\n# ~150 lines maximum\n# Handles: User ops, task ops, project ops, notification ops\n</code></pre>"},{"location":"telegram-bots/development-approach/#entitiespy-business-entities","title":"<code>entities.py</code> - Business Entities","text":"<pre><code># Core business objects\n# ~100 lines maximum\n# Handles: User, Task, Project entities with behavior\n</code></pre>"},{"location":"telegram-bots/development-approach/#adapterspy-external-integrations","title":"<code>adapters.py</code> - External Integrations","text":"<pre><code># External system adapters\n# ~100 lines maximum\n# Handles: Telegram API, database operations\n</code></pre>"},{"location":"telegram-bots/development-approach/#2-database-layer-minimal","title":"2. Database Layer (Minimal)","text":""},{"location":"telegram-bots/development-approach/#modelspy-database-models","title":"<code>models.py</code> - Database Models","text":"<pre><code># SQLAlchemy ORM models\n# ~50 lines maximum\n# Handles: User, Task, Project tables\n</code></pre>"},{"location":"telegram-bots/development-approach/#databasepy-database-operations","title":"<code>database.py</code> - Database Operations","text":"<pre><code># Database connection and session management\n# ~50 lines maximum\n# Handles: Connection, sessions, migrations\n</code></pre>"},{"location":"telegram-bots/development-approach/#3-configuration-minimal","title":"3. Configuration (Minimal)","text":""},{"location":"telegram-bots/development-approach/#configpy-configuration-management","title":"<code>config.py</code> - Configuration Management","text":"<pre><code># Environment configuration\n# ~30 lines maximum\n# Handles: Environment variables, defaults, validation\n</code></pre>"},{"location":"telegram-bots/development-approach/#emojispy-emoji-configuration","title":"<code>emojis.py</code> - Emoji Configuration","text":"<pre><code># Centralized emoji management\n# ~50 lines maximum\n# Handles: All emojis used in the bot\n</code></pre>"},{"location":"telegram-bots/development-approach/#development-methodology","title":"Development Methodology","text":""},{"location":"telegram-bots/development-approach/#1-incremental-development","title":"1. Incremental Development","text":"<p>Phase 1: Core Foundation</p> <ul> <li>Basic bot setup and configuration</li> <li>Simple message handling</li> <li>Basic user registration</li> <li>Minimal database setup</li> </ul> <p>Phase 2: Task Management</p> <ul> <li>Task creation from group messages</li> <li>Basic task storage and retrieval</li> <li>Simple task status tracking</li> <li>Basic notifications</li> </ul> <p>Phase 3: User Interface</p> <ul> <li>Inline keyboard menus</li> <li>Task list display</li> <li>Task action handling</li> <li>Navigation system</li> </ul> <p>Phase 4: Advanced Features</p> <ul> <li>Role-based permissions</li> <li>Advanced task management</li> <li>Notification system</li> <li>Error handling and recovery</li> </ul> <p>Phase 5: Polish and Optimization</p> <ul> <li>Performance optimization</li> <li>Comprehensive error handling</li> <li>User experience improvements</li> <li>Documentation and testing</li> </ul>"},{"location":"telegram-bots/development-approach/#2-feature-first-development","title":"2. Feature-First Development","text":"<p>Each feature includes:</p> <ul> <li>Complete user workflow</li> <li>All necessary UI elements</li> <li>Error handling</li> <li>Tests</li> <li>Documentation</li> </ul> <p>Feature Development Process:</p> <ol> <li>Write user story and acceptance criteria</li> <li>Write tests for the feature</li> <li>Implement minimal viable feature</li> <li>Test and iterate</li> <li>Document the feature</li> <li>Move to next feature</li> </ol>"},{"location":"telegram-bots/development-approach/#3-context-window-optimization","title":"3. Context Window Optimization","text":"<p>For Cursor Context Window:</p> <ul> <li>Keep files under 200 lines when possible</li> <li>Use clear, descriptive function names</li> <li>Minimize complex nested structures</li> <li>Use type hints for clarity</li> <li>Add comprehensive docstrings</li> </ul> <p>File Organization:</p> <ul> <li>Single responsibility per file</li> <li>Clear imports and dependencies</li> <li>Minimal cross-file dependencies</li> <li>Logical grouping of related functionality</li> </ul>"},{"location":"telegram-bots/development-approach/#database-strategy","title":"Database Strategy","text":""},{"location":"telegram-bots/development-approach/#1-minimal-schema","title":"1. Minimal Schema","text":"<p>Core Tables Only:</p> <ul> <li><code>users</code> - User information and roles</li> <li><code>tasks</code> - Task data and status</li> <li><code>projects</code> - Project definitions</li> <li><code>notifications</code> - Notification queue</li> </ul> <p>No Complex Relationships:</p> <ul> <li>Simple foreign keys only</li> <li>No complex joins</li> <li>Denormalized where appropriate</li> <li>Indexes only where necessary</li> </ul>"},{"location":"telegram-bots/development-approach/#2-migration-strategy","title":"2. Migration Strategy","text":"<ul> <li>Single Migration File: All schema changes in one file</li> <li>Backward Compatible: Always maintain backward compatibility</li> <li>Data Preservation: Never lose user data</li> <li>Rollback Support: Ability to rollback changes</li> </ul>"},{"location":"telegram-bots/development-approach/#3-data-access-pattern","title":"3. Data Access Pattern","text":"<ul> <li>Repository Pattern: Simple data access abstraction</li> <li>Active Record: Entities know how to save themselves</li> <li>Transaction Management: Simple transaction handling</li> <li>Error Handling: Graceful database error handling</li> </ul>"},{"location":"telegram-bots/development-approach/#testing-strategy","title":"Testing Strategy","text":""},{"location":"telegram-bots/development-approach/#1-test-pyramid","title":"1. Test Pyramid","text":"<p>Unit Tests (70%):</p> <ul> <li>Individual function testing</li> <li>Entity behavior testing</li> <li>Business logic validation</li> <li>Mock external dependencies</li> </ul> <p>Integration Tests (20%):</p> <ul> <li>Database operations</li> <li>Telegram API interactions</li> <li>End-to-end workflows</li> <li>Error scenarios</li> </ul> <p>End-to-End Tests (10%):</p> <ul> <li>Complete user journeys</li> <li>Real Telegram bot testing</li> <li>Performance validation</li> <li>User experience testing</li> </ul>"},{"location":"telegram-bots/development-approach/#2-test-organization","title":"2. Test Organization","text":"<p>Test Structure:</p> <pre><code>tests/\n\u251c\u2500\u2500 unit/\n\u2502   \u251c\u2500\u2500 test_entities.py\n\u2502   \u251c\u2500\u2500 test_ops.py\n\u2502   \u2514\u2500\u2500 test_flows.py\n\u251c\u2500\u2500 integration/\n\u2502   \u251c\u2500\u2500 test_database.py\n\u2502   \u251c\u2500\u2500 test_telegram.py\n\u2502   \u2514\u2500\u2500 test_workflows.py\n\u2514\u2500\u2500 e2e/\n    \u251c\u2500\u2500 test_task_creation.py\n    \u251c\u2500\u2500 test_task_execution.py\n    \u2514\u2500\u2500 test_user_management.py\n</code></pre>"},{"location":"telegram-bots/development-approach/#3-test-data-management","title":"3. Test Data Management","text":"<ul> <li>Fixtures: Reusable test data</li> <li>Factories: Dynamic test data generation</li> <li>Mocks: External dependency simulation</li> <li>Cleanup: Automatic test data cleanup</li> </ul>"},{"location":"telegram-bots/development-approach/#error-handling-strategy","title":"Error Handling Strategy","text":""},{"location":"telegram-bots/development-approach/#1-error-hierarchy","title":"1. Error Hierarchy","text":"<p>Error Types:</p> <ul> <li>User Errors: Invalid input, permission denied</li> <li>System Errors: Database failures, API errors</li> <li>Business Errors: Business rule violations</li> <li>Unexpected Errors: Unhandled exceptions</li> </ul>"},{"location":"telegram-bots/development-approach/#2-error-handling-pattern","title":"2. Error Handling Pattern","text":"<pre><code>try:\n    # Business operation\n    result = await operation()\n    return result\nexcept UserError as e:\n    # User-friendly error message\n    await send_error_message(user_id, str(e))\nexcept SystemError as e:\n    # Log error, retry if possible\n    logger.error(f\"System error: {e}\")\n    await retry_operation()\nexcept Exception as e:\n    # Unexpected error, log and notify\n    logger.error(f\"Unexpected error: {e}\", exc_info=True)\n    await notify_admin(str(e))\n</code></pre>"},{"location":"telegram-bots/development-approach/#3-recovery-strategies","title":"3. Recovery Strategies","text":"<ul> <li>Retry Logic: Automatic retry for transient failures</li> <li>Graceful Degradation: Continue operation when possible</li> <li>User Notification: Clear error messages to users</li> <li>Admin Notification: Critical error alerts</li> </ul>"},{"location":"telegram-bots/development-approach/#performance-strategy","title":"Performance Strategy","text":""},{"location":"telegram-bots/development-approach/#1-async-first-design","title":"1. Async-First Design","text":"<ul> <li>Non-blocking I/O: All external calls are async</li> <li>Concurrent Operations: Multiple operations in parallel</li> <li>Connection Pooling: Efficient resource usage</li> <li>Memory Management: Proper resource cleanup</li> </ul>"},{"location":"telegram-bots/development-approach/#2-database-optimization","title":"2. Database Optimization","text":"<ul> <li>Efficient Queries: Only fetch needed data</li> <li>Proper Indexing: Indexes on frequently queried columns</li> <li>Connection Pooling: Reuse database connections (see details below)</li> <li>Query Optimization: Monitor and optimize slow queries</li> </ul>"},{"location":"telegram-bots/development-approach/#3-connection-pooling-critical","title":"3. Connection Pooling (Critical)","text":"<p>\u041f\u043e\u0447\u0435\u043c\u0443 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e: \u0411\u0435\u0437 \u043f\u0443\u043b\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0441\u043e\u0437\u0434\u0430\u0451\u0442 \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0411\u0414 (~50-100ms overhead), \u0447\u0442\u043e \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a: - \u041c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u043c \u043e\u0442\u043a\u043b\u0438\u043a\u0430\u043c \u043f\u043e\u0434 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u043e\u0439 - \u0420\u0438\u0441\u043a\u0443 \u0438\u0441\u0447\u0435\u0440\u043f\u0430\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 - \u0418\u0437\u0431\u044b\u0442\u043e\u0447\u043d\u043e\u043c\u0443 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044e \u043f\u0430\u043c\u044f\u0442\u0438</p> <p>\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0434\u043b\u044f SQLAlchemy:</p> <pre><code>from sqlalchemy.ext.asyncio import create_async_engine\n\nengine = create_async_engine(\n    database_url,\n    pool_size=5,          # \u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0432 \u043f\u0443\u043b\u0435\n    max_overflow=10,      # \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043f\u0440\u0438 \u043f\u0438\u043a\u0430\u0445\n    pool_pre_ping=True,   # \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0436\u0438\u0432\u043e\u0441\u0442\u0438 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\n    pool_recycle=3600,    # \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u043a\u0430\u0436\u0434\u044b\u0439 \u0447\u0430\u0441\n    pool_timeout=30,      # \u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\n)\n</code></pre> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e \u0442\u0438\u043f\u0443 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438:</p> \u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 pool_size max_overflow \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u041d\u0438\u0437\u043a\u0430\u044f (&lt;100 users) 3-5 5 \u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430, \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0421\u0440\u0435\u0434\u043d\u044f\u044f (100-1000) 5-10 10-15 \u041d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 production \u0412\u044b\u0441\u043e\u043a\u0430\u044f (1000+) 10-20 20-30 \u041c\u0430\u0441\u0448\u0442\u0430\u0431\u043d\u044b\u0439 production <p>\u041f\u0440\u0430\u0432\u0438\u043b\u043e: \u0412\u0441\u0435\u0433\u0434\u0430 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u043f\u0443\u043b \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439 \u0441 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0434\u043d\u044f, \u0434\u0430\u0436\u0435 \u0434\u043b\u044f SQLite \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435.</p>"},{"location":"telegram-bots/development-approach/#4-dependency-lifecycle-management","title":"4. Dependency Lifecycle Management","text":"<p>\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0430\u0442\u0442\u0435\u0440\u043d \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u043f\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0436\u0438\u0437\u043d\u0438:</p> <p>Application Scope (\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435): - External API clients (Telegram, HTTP, Email) - Configuration \u0438 feature flags - Connection pools (database, redis) - Stateless services (notification, metrics) - Loggers</p> <p>Request Scope (\u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441): - Database session - Repositories (\u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u043a \u0441\u0435\u0441\u0441\u0438\u0438) - Unit of Work / Transaction - User context - Request-specific cache</p> <pre><code># Application scope (\u0432 __init__)\nself.telegram_adapter = TelegramAdapter(config)\nself.notification_service = NotificationService(self.telegram_adapter)\n\n# Request scope (\u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0435)\nasync def handle_message(message):\n    async with db.session() as session:\n        user_repo = UserRepository(session)  # Request-scoped\n        service = UserService(\n            repo=user_repo,\n            notifier=self.notification_service  # Reuse app-scoped!\n        )\n</code></pre> <p>\u041f\u0440\u0430\u0432\u0438\u043b\u043e: \u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0439 \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0442\u043e, \u0447\u0442\u043e \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f. \u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0439 \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e, \u0447\u0442\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0432\u0435\u0436\u0438\u043c.</p>"},{"location":"telegram-bots/development-approach/#5-caching-strategy","title":"5. Caching Strategy","text":"<ul> <li>In-Memory Caching: Cache frequently accessed data</li> <li>Session Caching: Cache user session data</li> <li>Configuration Caching: Cache configuration values</li> <li>Result Caching: Cache expensive operation results</li> </ul>"},{"location":"telegram-bots/development-approach/#security-strategy","title":"Security Strategy","text":""},{"location":"telegram-bots/development-approach/#1-input-validation","title":"1. Input Validation","text":"<ul> <li>Sanitization: Clean all user inputs</li> <li>Validation: Verify data integrity and format</li> <li>Type Safety: Strong typing throughout</li> <li>SQL Injection Prevention: Parameterized queries only</li> </ul>"},{"location":"telegram-bots/development-approach/#2-authentication-authorization","title":"2. Authentication &amp; Authorization","text":"<ul> <li>Telegram User Verification: Verify user identity</li> <li>Role-Based Access: Granular permission system</li> <li>Session Management: Secure user context</li> <li>Permission Checking: Validate all operations</li> </ul>"},{"location":"telegram-bots/development-approach/#3-data-protection","title":"3. Data Protection","text":"<ul> <li>Sensitive Data: Encrypt sensitive information</li> <li>Audit Logging: Log all important operations</li> <li>Data Retention: Implement data retention policies</li> <li>Privacy Compliance: Follow privacy regulations</li> </ul>"},{"location":"telegram-bots/development-approach/#deployment-strategy","title":"Deployment Strategy","text":""},{"location":"telegram-bots/development-approach/#1-environment-management","title":"1. Environment Management","text":"<ul> <li>Development: Local development environment</li> <li>Testing: Automated testing environment</li> <li>Staging: Production-like testing environment</li> <li>Production: Live production environment</li> </ul>"},{"location":"telegram-bots/development-approach/#2-configuration-management","title":"2. Configuration Management","text":"<ul> <li>Environment Variables: All configuration via env vars</li> <li>Secrets Management: Secure handling of sensitive data</li> <li>Configuration Validation: Validate all configuration</li> <li>Default Values: Sensible defaults for all settings</li> </ul>"},{"location":"telegram-bots/development-approach/#3-monitoring-logging","title":"3. Monitoring &amp; Logging","text":"<ul> <li>Structured Logging: Consistent log format</li> <li>Error Tracking: Comprehensive error monitoring</li> <li>Performance Metrics: Application performance tracking</li> <li>Health Checks: System health monitoring</li> </ul>"},{"location":"telegram-bots/development-approach/#documentation-strategy","title":"Documentation Strategy","text":""},{"location":"telegram-bots/development-approach/#1-code-documentation","title":"1. Code Documentation","text":"<ul> <li>Docstrings: Comprehensive function documentation</li> <li>Type Hints: Clear type annotations</li> <li>Comments: Explain complex logic</li> <li>README: Clear setup and usage instructions</li> </ul>"},{"location":"telegram-bots/development-approach/#2-user-documentation","title":"2. User Documentation","text":"<ul> <li>User Guide: Complete user manual</li> <li>API Documentation: Technical reference</li> <li>Troubleshooting: Common issues and solutions</li> <li>FAQ: Frequently asked questions</li> </ul>"},{"location":"telegram-bots/development-approach/#3-developer-documentation","title":"3. Developer Documentation","text":"<ul> <li>Architecture Guide: System design documentation</li> <li>Development Guide: Development setup and guidelines</li> <li>Contributing Guide: How to contribute to the project</li> <li>Deployment Guide: Production deployment instructions</li> </ul>"},{"location":"telegram-bots/development-approach/#quality-assurance","title":"Quality Assurance","text":""},{"location":"telegram-bots/development-approach/#1-code-quality","title":"1. Code Quality","text":"<ul> <li>Type Checking: mypy for type safety</li> <li>Code Formatting: Black and isort for consistency</li> <li>Linting: Pylint for code quality</li> <li>Pre-commit Hooks: Automated quality checks</li> </ul>"},{"location":"telegram-bots/development-approach/#2-testing-quality","title":"2. Testing Quality","text":"<ul> <li>Test Coverage: Maintain high test coverage</li> <li>Test Quality: Meaningful, maintainable tests</li> <li>Test Performance: Fast test execution</li> <li>Test Reliability: Stable, repeatable tests</li> </ul>"},{"location":"telegram-bots/development-approach/#3-user-experience-quality","title":"3. User Experience Quality","text":"<ul> <li>Usability Testing: Regular user testing</li> <li>Performance Testing: Load and stress testing</li> <li>Accessibility: Ensure bot is accessible</li> <li>Error Handling: Graceful error handling</li> </ul>"},{"location":"telegram-bots/development-approach/#success-metrics","title":"Success Metrics","text":""},{"location":"telegram-bots/development-approach/#1-development-metrics","title":"1. Development Metrics","text":"<ul> <li>Code Quality: High test coverage, low complexity</li> <li>Development Speed: Fast feature delivery</li> <li>Bug Rate: Low bug introduction rate</li> <li>Maintainability: Easy to modify and extend</li> </ul>"},{"location":"telegram-bots/development-approach/#2-user-experience-metrics","title":"2. User Experience Metrics","text":"<ul> <li>Response Time: Fast bot responses</li> <li>Error Rate: Low error occurrence</li> <li>User Satisfaction: Positive user feedback</li> <li>Feature Adoption: High feature usage</li> </ul>"},{"location":"telegram-bots/development-approach/#3-system-metrics","title":"3. System Metrics","text":"<ul> <li>Uptime: High system availability</li> <li>Performance: Fast operation execution</li> <li>Scalability: Handle growing user base</li> <li>Security: No security vulnerabilities</li> </ul>"},{"location":"telegram-bots/ui-menus/","title":"Telegram UI Patterns","text":"<p>\u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f Telegram \u0431\u043e\u0442\u043e\u0432.</p>"},{"location":"telegram-bots/ui-menus/#ui","title":"\ud83c\udfaf \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b UI","text":""},{"location":"telegram-bots/ui-menus/#_1","title":"\u0422\u0438\u043f\u044b \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f","text":"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Inline Keyboards \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f Reply Keyboards \u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438 (\u043c\u0435\u043d\u044e) Inline Mode \u041f\u043e\u0438\u0441\u043a \u0438 \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 Commands \u0411\u044b\u0441\u0442\u0440\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f (/start, /help)"},{"location":"telegram-bots/ui-menus/#inline-keyboards","title":"\u2328\ufe0f Inline Keyboards","text":""},{"location":"telegram-bots/ui-menus/#_2","title":"\u0411\u0430\u0437\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>from telegram import InlineKeyboardButton, InlineKeyboardMarkup\n\ndef build_menu_keyboard() -&gt; InlineKeyboardMarkup:\n    \"\"\"\u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 inline \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b.\"\"\"\n    buttons = [\n        [InlineKeyboardButton(\"\ud83d\udccb \u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438\", callback_data=\"tasks_my\")],\n        [InlineKeyboardButton(\"\u2795 \u0421\u043e\u0437\u0434\u0430\u0442\u044c\", callback_data=\"task_create\")],\n        [\n            InlineKeyboardButton(\"\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\", callback_data=\"settings\"),\n            InlineKeyboardButton(\"\u2139\ufe0f \u041f\u043e\u043c\u043e\u0449\u044c\", callback_data=\"help\"),\n        ],\n    ]\n    return InlineKeyboardMarkup(buttons)\n</code></pre>"},{"location":"telegram-bots/ui-menus/#_3","title":"\u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043a\u043d\u043e\u043f\u043e\u043a","text":"<pre><code># \u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a (\u043e\u0434\u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0430 \u0432 \u0440\u044f\u0434)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      \ud83d\udccb \u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u2795 \u0421\u043e\u0437\u0434\u0430\u0442\u044c         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n# \u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u044f\u0434 (\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043d\u043e\u043f\u043e\u043a)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2705 \u0414\u0430    \u2502  \u274c \u041d\u0435\u0442   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n# \u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      \ud83d\udccb \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u25c0\ufe0f \u041d\u0430\u0437\u0430\u0434 \u2502  \ud83d\udd04 \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"telegram-bots/ui-menus/#_4","title":"\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435","text":"<pre><code>def build_list_keyboard(\n    items: list[Item],\n    page: int = 1,\n    per_page: int = 5\n) -&gt; InlineKeyboardMarkup:\n    \"\"\"\u041a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430 \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0438 \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u0435\u0439.\"\"\"\n    buttons = []\n\n    # \u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0441\u043f\u0438\u0441\u043a\u0430\n    start = (page - 1) * per_page\n    for item in items[start:start + per_page]:\n        buttons.append([\n            InlineKeyboardButton(\n                f\"{item.emoji} {item.title[:30]}\",\n                callback_data=f\"item_{item.id}\"\n            )\n        ])\n\n    # \u041f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044f\n    nav_row = []\n    if page &gt; 1:\n        nav_row.append(InlineKeyboardButton(\"\u25c0\ufe0f\", callback_data=f\"page_{page-1}\"))\n    nav_row.append(InlineKeyboardButton(f\"\ud83d\udcc4 {page}/{total_pages}\", callback_data=\"noop\"))\n    if page &lt; total_pages:\n        nav_row.append(InlineKeyboardButton(\"\u25b6\ufe0f\", callback_data=f\"page_{page+1}\"))\n\n    if nav_row:\n        buttons.append(nav_row)\n\n    # \u041a\u043d\u043e\u043f\u043a\u0430 \u043d\u0430\u0437\u0430\u0434\n    buttons.append([InlineKeyboardButton(\"\ud83d\udd19 \u041d\u0430\u0437\u0430\u0434\", callback_data=\"back\")])\n\n    return InlineKeyboardMarkup(buttons)\n</code></pre>"},{"location":"telegram-bots/ui-menus/#_5","title":"\ud83e\udded \u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f","text":""},{"location":"telegram-bots/ui-menus/#breadcrumb","title":"Breadcrumb \u043f\u0430\u0442\u0442\u0435\u0440\u043d","text":"<pre><code>def build_breadcrumb(path: list[str]) -&gt; str:\n    \"\"\"\u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 \u0445\u043b\u0435\u0431\u043d\u044b\u0445 \u043a\u0440\u043e\u0448\u0435\u043a.\"\"\"\n    return \" \u2192 \".join(path)\n\n# \u041f\u0440\u0438\u043c\u0435\u0440\u044b:\n# \"\ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e\"\n# \"\ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u2192 \ud83d\udccb \u0417\u0430\u0434\u0430\u0447\u0438\"\n# \"\ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u2192 \ud83d\udccb \u0417\u0430\u0434\u0430\u0447\u0438 \u2192 \u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\"\n</code></pre>"},{"location":"telegram-bots/ui-menus/#back-","title":"Back-\u043a\u043d\u043e\u043f\u043a\u0430 \u0441 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c","text":"<pre><code># \u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u0438\nuser_navigation_stack: dict[int, list[str]] = {}\n\ndef push_state(user_id: int, state: str):\n    \"\"\"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0432 \u0441\u0442\u0435\u043a.\"\"\"\n    if user_id not in user_navigation_stack:\n        user_navigation_stack[user_id] = []\n    user_navigation_stack[user_id].append(state)\n\ndef pop_state(user_id: int) -&gt; str | None:\n    \"\"\"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c\u0443 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e.\"\"\"\n    stack = user_navigation_stack.get(user_id, [])\n    return stack.pop() if stack else None\n</code></pre>"},{"location":"telegram-bots/ui-menus/#callback-data-conventions","title":"\ud83d\udcdd Callback Data Conventions","text":""},{"location":"telegram-bots/ui-menus/#callback_data","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 callback_data","text":"<pre><code># \u041f\u0430\u0442\u0442\u0435\u0440\u043d: {action}_{entity}_{id}\n# \u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 64 \u0431\u0430\u0439\u0442\u0430!\n\n# \u041f\u0440\u0438\u043c\u0435\u0440\u044b:\n\"task_view_123\"      # \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u0434\u0430\u0447\u0438 123\n\"task_edit_123\"      # \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 123\n\"task_delete_123\"    # \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 123\n\"page_tasks_2\"       # \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 2 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u0434\u0430\u0447\n\"confirm_delete_123\" # \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f\n\"cancel\"             # \u041e\u0442\u043c\u0435\u043d\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\n\"back\"               # \u041d\u0430\u0437\u0430\u0434\n\"noop\"               # \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c (\u0434\u043b\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a)\n</code></pre>"},{"location":"telegram-bots/ui-menus/#callback_data_1","title":"\u041f\u0430\u0440\u0441\u0438\u043d\u0433 callback_data","text":"<pre><code>async def handle_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    \"\"\"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 callback query.\"\"\"\n    query = update.callback_query\n    await query.answer()  # \u0412\u0430\u0436\u043d\u043e! \u0423\u0431\u0438\u0440\u0430\u0435\u0442 \"\u0447\u0430\u0441\u0438\u043a\u0438\"\n\n    data = query.data\n    parts = data.split(\"_\")\n\n    if data == \"back\":\n        await handle_back(query)\n    elif data == \"noop\":\n        return  # \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0435\u043c\n    elif parts[0] == \"task\":\n        action = parts[1]  # view, edit, delete\n        task_id = int(parts[2])\n        await handle_task_action(query, action, task_id)\n    elif parts[0] == \"page\":\n        entity = parts[1]\n        page = int(parts[2])\n        await handle_pagination(query, entity, page)\n</code></pre>"},{"location":"telegram-bots/ui-menus/#emoji-ui","title":"\ud83c\udfa8 Emoji \u043a\u0430\u043a UI \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b","text":""},{"location":"telegram-bots/ui-menus/#_6","title":"\u0421\u0442\u0430\u0442\u0443\u0441\u044b","text":"Emoji \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u23f3 \u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \ud83d\udd04 \u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u2705 \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e \u274c \u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e/\u041e\u0448\u0438\u0431\u043a\u0430 \ud83d\udeab \u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e \u26a0\ufe0f \u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \ud83d\udd34 \u041a\u0440\u0438\u0442\u0438\u0447\u043d\u043e/\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e \ud83d\udfe1 \u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f \ud83d\udfe2 \u0412\u0441\u0451 \u0445\u043e\u0440\u043e\u0448\u043e"},{"location":"telegram-bots/ui-menus/#_7","title":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f","text":"Emoji \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u2795 \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \ud83d\uddd1\ufe0f \u0423\u0434\u0430\u043b\u0438\u0442\u044c \ud83d\udc41\ufe0f \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \ud83d\udd19 \u041d\u0430\u0437\u0430\u0434 \ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \ud83d\udccb \u0421\u043f\u0438\u0441\u043e\u043a \ud83d\udd0d \u041f\u043e\u0438\u0441\u043a"},{"location":"telegram-bots/ui-menus/#_8","title":"\u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f","text":"Emoji \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u25c0\ufe0f \u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u25b6\ufe0f \u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u23ee\ufe0f \u0412 \u043d\u0430\u0447\u0430\u043b\u043e \u23ed\ufe0f \u0412 \u043a\u043e\u043d\u0435\u0446 \ud83d\udd04 \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"},{"location":"telegram-bots/ui-menus/#_9","title":"\ud83d\udcca \u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445","text":""},{"location":"telegram-bots/ui-menus/#_10","title":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430","text":"<pre><code>def format_task_card(task: Task) -&gt; str:\n    \"\"\"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0437\u0430\u0434\u0430\u0447\u0438.\"\"\"\n    status_emoji = STATUS_EMOJI.get(task.status, \"\u2753\")\n\n    lines = [\n        f\"{status_emoji} &lt;b&gt;{task.title}&lt;/b&gt;\",\n        f\"\",\n        f\"\ud83d\udcdd {task.description[:100]}{'...' if len(task.description) &gt; 100 else ''}\",\n        f\"\",\n        f\"\ud83d\udc64 \u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c: {task.assignee or '\u041d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d'}\",\n        f\"\ud83d\udcc5 \u0421\u0440\u043e\u043a: {task.due_date.strftime('%d.%m.%Y') if task.due_date else '\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d'}\",\n        f\"\ud83d\udcca \u0421\u0442\u0430\u0442\u0443\u0441: {STATUS_LABELS[task.status]}\",\n    ]\n\n    return \"\\n\".join(lines)\n</code></pre>"},{"location":"telegram-bots/ui-menus/#_11","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432","text":"<pre><code>def format_task_list(tasks: list[Task], page: int, per_page: int) -&gt; str:\n    \"\"\"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u0434\u0430\u0447.\"\"\"\n    if not tasks:\n        return \"\ud83d\udced \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442\"\n\n    lines = [f\"\ud83d\udccb &lt;b&gt;\u0417\u0430\u0434\u0430\u0447\u0438&lt;/b&gt; (\u0441\u0442\u0440. {page}):\", \"\"]\n\n    for i, task in enumerate(tasks, start=1):\n        emoji = STATUS_EMOJI.get(task.status, \"\u2753\")\n        overdue = \"\ud83d\udd34 \" if task.is_overdue else \"\"\n        lines.append(f\"{i}. {overdue}{emoji} {task.title[:40]}\")\n\n    lines.append(\"\")\n    lines.append(f\"\u0412\u0441\u0435\u0433\u043e: {len(tasks)}\")\n\n    return \"\\n\".join(lines)\n</code></pre>"},{"location":"telegram-bots/ui-menus/#best-practices","title":"\u26a1 Best Practices","text":""},{"location":"telegram-bots/ui-menus/#dos","title":"Do's \u2705","text":"<ul> <li>\u0412\u0441\u0435\u0433\u0434\u0430 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c <code>await query.answer()</code> \u0434\u043b\u044f callback</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c emoji \u0434\u043b\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f</li> <li>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c callback_data \u0434\u043e 64 \u0431\u0430\u0439\u0442</li> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c breadcrumbs \u0434\u043b\u044f \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u0438</li> <li>\u0414\u0430\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u0434\u043b\u0438\u043d\u043d\u044b\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432</li> </ul>"},{"location":"telegram-bots/ui-menus/#donts","title":"Don'ts \u274c","text":"<ul> <li>\u041d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043a\u043d\u043e\u043f\u043e\u043a (\u043c\u0430\u043a\u0441 8-10)</li> <li>\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u0438\u043d\u043d\u044b\u0435 \u0442\u0435\u043a\u0441\u0442\u044b \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0430\u0445</li> <li>\u041d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \"noop\" callbacks</li> <li>\u041d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 callback_data</li> <li>\u041d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0443\u0431\u043e\u043a\u0443\u044e \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u043d\u044e (\u043c\u0430\u043a\u0441 3 \u0443\u0440\u043e\u0432\u043d\u044f)</li> </ul>"},{"location":"telegram-bots/ui-menus/#_12","title":"\ud83d\udd04 \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439","text":"<pre><code>async def update_message(query: CallbackQuery, text: str, keyboard: InlineKeyboardMarkup):\n    \"\"\"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u043e\u0439.\"\"\"\n    try:\n        await query.edit_message_text(\n            text=text,\n            reply_markup=keyboard,\n            parse_mode='HTML'\n        )\n    except Exception as e:\n        # \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u043e\n        logger.warning(f\"Failed to update message: {e}\")\n</code></pre>"},{"location":"telegram-bots/ui-menus/#_13","title":"\ud83d\udcda \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<ul> <li>Telegram Bot API - Inline Keyboards</li> <li>python-telegram-bot Wiki</li> </ul>"},{"location":"telegram-bots/ui-patterns/","title":"Telegram UI Patterns","text":"<p>\u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0434\u043b\u044f Telegram \u0431\u043e\u0442\u043e\u0432.</p>"},{"location":"telegram-bots/ui-patterns/#ui","title":"\ud83c\udfaf \u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b UI","text":""},{"location":"telegram-bots/ui-patterns/#_1","title":"\u0422\u0438\u043f\u044b \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f","text":"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u041a\u043e\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Inline Keyboards \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f Reply Keyboards \u041f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438 (\u043c\u0435\u043d\u044e) Inline Mode \u041f\u043e\u0438\u0441\u043a \u0438 \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 Commands \u0411\u044b\u0441\u0442\u0440\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f (/start, /help)"},{"location":"telegram-bots/ui-patterns/#inline-keyboards","title":"\u2328\ufe0f Inline Keyboards","text":""},{"location":"telegram-bots/ui-patterns/#_2","title":"\u0411\u0430\u0437\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430","text":"<pre><code>from telegram import InlineKeyboardButton, InlineKeyboardMarkup\n\ndef build_menu_keyboard() -&gt; InlineKeyboardMarkup:\n    \"\"\"\u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 inline \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b.\"\"\"\n    buttons = [\n        [InlineKeyboardButton(\"\ud83d\udccb \u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438\", callback_data=\"tasks_my\")],\n        [InlineKeyboardButton(\"\u2795 \u0421\u043e\u0437\u0434\u0430\u0442\u044c\", callback_data=\"task_create\")],\n        [\n            InlineKeyboardButton(\"\u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\", callback_data=\"settings\"),\n            InlineKeyboardButton(\"\u2139\ufe0f \u041f\u043e\u043c\u043e\u0449\u044c\", callback_data=\"help\"),\n        ],\n    ]\n    return InlineKeyboardMarkup(buttons)\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#_3","title":"\u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043a\u043d\u043e\u043f\u043e\u043a","text":"<pre><code># \u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a (\u043e\u0434\u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0430 \u0432 \u0440\u044f\u0434)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      \ud83d\udccb \u041c\u043e\u0438 \u0437\u0430\u0434\u0430\u0447\u0438      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u2795 \u0421\u043e\u0437\u0434\u0430\u0442\u044c         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502      \u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n# \u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u044f\u0434 (\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043d\u043e\u043f\u043e\u043a)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2705 \u0414\u0430    \u2502  \u274c \u041d\u0435\u0442   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n# \u041a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      \ud83d\udccb \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u25c0\ufe0f \u041d\u0430\u0437\u0430\u0434 \u2502  \ud83d\udd04 \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#_4","title":"\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435","text":"<pre><code>def build_list_keyboard(\n    items: list[Item],\n    page: int = 1,\n    per_page: int = 5\n) -&gt; InlineKeyboardMarkup:\n    \"\"\"\u041a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430 \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0438 \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u0435\u0439.\"\"\"\n    buttons = []\n\n    # \u042d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0441\u043f\u0438\u0441\u043a\u0430\n    start = (page - 1) * per_page\n    for item in items[start:start + per_page]:\n        buttons.append([\n            InlineKeyboardButton(\n                f\"{item.emoji} {item.title[:30]}\",\n                callback_data=f\"item_{item.id}\"\n            )\n        ])\n\n    # \u041f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044f\n    nav_row = []\n    if page &gt; 1:\n        nav_row.append(InlineKeyboardButton(\"\u25c0\ufe0f\", callback_data=f\"page_{page-1}\"))\n    nav_row.append(InlineKeyboardButton(f\"\ud83d\udcc4 {page}/{total_pages}\", callback_data=\"noop\"))\n    if page &lt; total_pages:\n        nav_row.append(InlineKeyboardButton(\"\u25b6\ufe0f\", callback_data=f\"page_{page+1}\"))\n\n    if nav_row:\n        buttons.append(nav_row)\n\n    # \u041a\u043d\u043e\u043f\u043a\u0430 \u043d\u0430\u0437\u0430\u0434\n    buttons.append([InlineKeyboardButton(\"\ud83d\udd19 \u041d\u0430\u0437\u0430\u0434\", callback_data=\"back\")])\n\n    return InlineKeyboardMarkup(buttons)\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#_5","title":"\ud83e\udded \u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f","text":""},{"location":"telegram-bots/ui-patterns/#breadcrumb","title":"Breadcrumb \u043f\u0430\u0442\u0442\u0435\u0440\u043d","text":"<pre><code>def build_breadcrumb(path: list[str]) -&gt; str:\n    \"\"\"\u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u0438\u0435 \u0445\u043b\u0435\u0431\u043d\u044b\u0445 \u043a\u0440\u043e\u0448\u0435\u043a.\"\"\"\n    return \" \u2192 \".join(path)\n\n# \u041f\u0440\u0438\u043c\u0435\u0440\u044b:\n# \"\ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e\"\n# \"\ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u2192 \ud83d\udccb \u0417\u0430\u0434\u0430\u0447\u0438\"\n# \"\ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u2192 \ud83d\udccb \u0417\u0430\u0434\u0430\u0447\u0438 \u2192 \u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\"\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#back-","title":"Back-\u043a\u043d\u043e\u043f\u043a\u0430 \u0441 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c","text":"<pre><code># \u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u0438\nuser_navigation_stack: dict[int, list[str]] = {}\n\ndef push_state(user_id: int, state: str):\n    \"\"\"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0432 \u0441\u0442\u0435\u043a.\"\"\"\n    if user_id not in user_navigation_stack:\n        user_navigation_stack[user_id] = []\n    user_navigation_stack[user_id].append(state)\n\ndef pop_state(user_id: int) -&gt; str | None:\n    \"\"\"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c\u0443 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e.\"\"\"\n    stack = user_navigation_stack.get(user_id, [])\n    return stack.pop() if stack else None\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#callback-data-conventions","title":"\ud83d\udcdd Callback Data Conventions","text":""},{"location":"telegram-bots/ui-patterns/#callback_data","title":"\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 callback_data","text":"<pre><code># \u041f\u0430\u0442\u0442\u0435\u0440\u043d: {action}_{entity}_{id}\n# \u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 64 \u0431\u0430\u0439\u0442\u0430!\n\n# \u041f\u0440\u0438\u043c\u0435\u0440\u044b:\n\"task_view_123\"      # \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0437\u0430\u0434\u0430\u0447\u0438 123\n\"task_edit_123\"      # \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 123\n\"task_delete_123\"    # \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 123\n\"page_tasks_2\"       # \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 2 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u0434\u0430\u0447\n\"confirm_delete_123\" # \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f\n\"cancel\"             # \u041e\u0442\u043c\u0435\u043d\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\n\"back\"               # \u041d\u0430\u0437\u0430\u0434\n\"noop\"               # \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c (\u0434\u043b\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a)\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#callback_data_1","title":"\u041f\u0430\u0440\u0441\u0438\u043d\u0433 callback_data","text":"<pre><code>async def handle_callback(update: Update, context: ContextTypes.DEFAULT_TYPE):\n    \"\"\"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 callback query.\"\"\"\n    query = update.callback_query\n    await query.answer()  # \u0412\u0430\u0436\u043d\u043e! \u0423\u0431\u0438\u0440\u0430\u0435\u0442 \"\u0447\u0430\u0441\u0438\u043a\u0438\"\n\n    data = query.data\n    parts = data.split(\"_\")\n\n    if data == \"back\":\n        await handle_back(query)\n    elif data == \"noop\":\n        return  # \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0435\u043c\n    elif parts[0] == \"task\":\n        action = parts[1]  # view, edit, delete\n        task_id = int(parts[2])\n        await handle_task_action(query, action, task_id)\n    elif parts[0] == \"page\":\n        entity = parts[1]\n        page = int(parts[2])\n        await handle_pagination(query, entity, page)\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#emoji-ui","title":"\ud83c\udfa8 Emoji \u043a\u0430\u043a UI \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b","text":""},{"location":"telegram-bots/ui-patterns/#_6","title":"\u0421\u0442\u0430\u0442\u0443\u0441\u044b","text":"Emoji \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u23f3 \u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \ud83d\udd04 \u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u2705 \u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e \u274c \u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u043e/\u041e\u0448\u0438\u0431\u043a\u0430 \ud83d\udeab \u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e \u26a0\ufe0f \u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \ud83d\udd34 \u041a\u0440\u0438\u0442\u0438\u0447\u043d\u043e/\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e \ud83d\udfe1 \u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f \ud83d\udfe2 \u0412\u0441\u0451 \u0445\u043e\u0440\u043e\u0448\u043e"},{"location":"telegram-bots/ui-patterns/#_7","title":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f","text":"Emoji \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u2795 \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u270f\ufe0f \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \ud83d\uddd1\ufe0f \u0423\u0434\u0430\u043b\u0438\u0442\u044c \ud83d\udc41\ufe0f \u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \ud83d\udd19 \u041d\u0430\u0437\u0430\u0434 \ud83c\udfe0 \u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u043c\u0435\u043d\u044e \u2699\ufe0f \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \ud83d\udccb \u0421\u043f\u0438\u0441\u043e\u043a \ud83d\udd0d \u041f\u043e\u0438\u0441\u043a"},{"location":"telegram-bots/ui-patterns/#_8","title":"\u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f","text":"Emoji \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u25c0\ufe0f \u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u25b6\ufe0f \u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u23ee\ufe0f \u0412 \u043d\u0430\u0447\u0430\u043b\u043e \u23ed\ufe0f \u0412 \u043a\u043e\u043d\u0435\u0446 \ud83d\udd04 \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"},{"location":"telegram-bots/ui-patterns/#_9","title":"\ud83d\udcca \u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445","text":""},{"location":"telegram-bots/ui-patterns/#_10","title":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430","text":"<pre><code>def format_task_card(task: Task) -&gt; str:\n    \"\"\"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0437\u0430\u0434\u0430\u0447\u0438.\"\"\"\n    status_emoji = STATUS_EMOJI.get(task.status, \"\u2753\")\n\n    lines = [\n        f\"{status_emoji} &lt;b&gt;{task.title}&lt;/b&gt;\",\n        f\"\",\n        f\"\ud83d\udcdd {task.description[:100]}{'...' if len(task.description) &gt; 100 else ''}\",\n        f\"\",\n        f\"\ud83d\udc64 \u0418\u0441\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c: {task.assignee or '\u041d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d'}\",\n        f\"\ud83d\udcc5 \u0421\u0440\u043e\u043a: {task.due_date.strftime('%d.%m.%Y') if task.due_date else '\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d'}\",\n        f\"\ud83d\udcca \u0421\u0442\u0430\u0442\u0443\u0441: {STATUS_LABELS[task.status]}\",\n    ]\n\n    return \"\\n\".join(lines)\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#_11","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432","text":"<pre><code>def format_task_list(tasks: list[Task], page: int, per_page: int) -&gt; str:\n    \"\"\"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0437\u0430\u0434\u0430\u0447.\"\"\"\n    if not tasks:\n        return \"\ud83d\udced \u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442\"\n\n    lines = [f\"\ud83d\udccb &lt;b&gt;\u0417\u0430\u0434\u0430\u0447\u0438&lt;/b&gt; (\u0441\u0442\u0440. {page}):\", \"\"]\n\n    for i, task in enumerate(tasks, start=1):\n        emoji = STATUS_EMOJI.get(task.status, \"\u2753\")\n        overdue = \"\ud83d\udd34 \" if task.is_overdue else \"\"\n        lines.append(f\"{i}. {overdue}{emoji} {task.title[:40]}\")\n\n    lines.append(\"\")\n    lines.append(f\"\u0412\u0441\u0435\u0433\u043e: {len(tasks)}\")\n\n    return \"\\n\".join(lines)\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#best-practices","title":"\u26a1 Best Practices","text":""},{"location":"telegram-bots/ui-patterns/#dos","title":"Do's \u2705","text":"<ul> <li>\u0412\u0441\u0435\u0433\u0434\u0430 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c <code>await query.answer()</code> \u0434\u043b\u044f callback</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c emoji \u0434\u043b\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u0438\u044f</li> <li>\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0442\u044c callback_data \u0434\u043e 64 \u0431\u0430\u0439\u0442</li> <li>\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c breadcrumbs \u0434\u043b\u044f \u043d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u0438</li> <li>\u0414\u0430\u0432\u0430\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434</li> <li>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0430\u0433\u0438\u043d\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u0434\u043b\u0438\u043d\u043d\u044b\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432</li> </ul>"},{"location":"telegram-bots/ui-patterns/#donts","title":"Don'ts \u274c","text":"<ul> <li>\u041d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043a\u043d\u043e\u043f\u043e\u043a (\u043c\u0430\u043a\u0441 8-10)</li> <li>\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u0438\u043d\u043d\u044b\u0435 \u0442\u0435\u043a\u0441\u0442\u044b \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0430\u0445</li> <li>\u041d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \"noop\" callbacks</li> <li>\u041d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0447\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 callback_data</li> <li>\u041d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u0433\u043b\u0443\u0431\u043e\u043a\u0443\u044e \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043c\u0435\u043d\u044e (\u043c\u0430\u043a\u0441 3 \u0443\u0440\u043e\u0432\u043d\u044f)</li> </ul>"},{"location":"telegram-bots/ui-patterns/#_12","title":"\ud83d\udd04 \u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439","text":"<pre><code>async def update_message(query: CallbackQuery, text: str, keyboard: InlineKeyboardMarkup):\n    \"\"\"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u043e\u0439.\"\"\"\n    try:\n        await query.edit_message_text(\n            text=text,\n            reply_markup=keyboard,\n            parse_mode='HTML'\n        )\n    except Exception as e:\n        # \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u0438\u043b\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u043e\n        logger.warning(f\"Failed to update message: {e}\")\n</code></pre>"},{"location":"telegram-bots/ui-patterns/#_13","title":"\ud83d\udcda \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<ul> <li>Telegram Bot API - Inline Keyboards</li> <li>python-telegram-bot Wiki</li> </ul>"},{"location":"tools/","title":"\ud83d\udee0\ufe0f \u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b","text":"<p>\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0438 \u0443\u0442\u0438\u043b\u0438\u0442\u044b \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438.</p>"},{"location":"tools/#_2","title":"\ud83d\udcd1 \u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435","text":"\u0420\u0430\u0437\u0434\u0435\u043b \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 Git \u041a\u043e\u043c\u0430\u043d\u0434\u044b, workflow, best practices Docker \u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439"},{"location":"tools/#_3","title":"\ud83d\udd27 \u0411\u0430\u0437\u043e\u0432\u044b\u0439 \u043d\u0430\u0431\u043e\u0440 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432","text":""},{"location":"tools/#ide","title":"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 / IDE","text":"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 Cursor AI-powered IDE (\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439) VS Code \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 PyCharm Python-\u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u0430\u044f IDE"},{"location":"tools/#_4","title":"\u0422\u0435\u0440\u043c\u0438\u043d\u0430\u043b","text":"<pre><code># \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c\u044b\u0435 \u0430\u043b\u0438\u0430\u0441\u044b \u0434\u043b\u044f ~/.zshrc \u0438\u043b\u0438 ~/.bashrc\n\n# Git\nalias gs=\"git status\"\nalias gp=\"git pull\"\nalias gc=\"git commit\"\nalias gd=\"git diff\"\n\n# Python\nalias py=\"python3\"\nalias venv=\"source venv/bin/activate\"\nalias req=\"pip install -r requirements.txt\"\n\n# Docker\nalias dc=\"docker-compose\"\nalias dps=\"docker ps\"\n</code></pre>"},{"location":"tools/#python","title":"Python \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b","text":"<pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u043d\u0430\u0431\u043e\u0440\u0430\npip install black isort mypy flake8 pytest pytest-asyncio\n</code></pre>"},{"location":"tools/#_5","title":"\ud83d\udce6 \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044f\u043c\u0438","text":""},{"location":"tools/#poetry","title":"Poetry (\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f)","text":"<pre><code># \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\npoetry new my-project\n\n# \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439\npoetry add sqlalchemy\npoetry add --group dev pytest black\n\n# \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430\npoetry install\n\n# \u0417\u0430\u043f\u0443\u0441\u043a\npoetry run python main.py\n</code></pre>"},{"location":"tools/#pip-requirementstxt","title":"pip + requirements.txt","text":"<pre><code># \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f\npython -m venv venv\nsource venv/bin/activate\n\n# \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430\npip install -r requirements.txt\n\n# \u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439\npip freeze &gt; requirements.txt\n</code></pre>"},{"location":"tools/#docker-quick-reference","title":"\ud83d\udc33 Docker Quick Reference","text":"<pre><code># \u0421\u0431\u043e\u0440\u043a\u0430 \u043e\u0431\u0440\u0430\u0437\u0430\ndocker build -t my-app .\n\n# \u0417\u0430\u043f\u0443\u0441\u043a \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\ndocker run -d --name my-app -p 8000:8000 my-app\n\n# Docker Compose\ndocker-compose up -d\ndocker-compose logs -f\ndocker-compose down\n</code></pre>"},{"location":"tools/docker/","title":"Docker","text":"<p>\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439.</p>"},{"location":"tools/docker/#_1","title":"\ud83d\udc33 \u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"tools/docker/#_2","title":"\u041e\u0431\u0440\u0430\u0437\u044b","text":"<pre><code># \u0421\u0431\u043e\u0440\u043a\u0430\ndocker build -t my-app:latest .\ndocker build -t my-app:1.0.0 -f Dockerfile.prod .\n\n# \u0421\u043f\u0438\u0441\u043e\u043a\ndocker images\n\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435\ndocker rmi my-app:latest\ndocker image prune  # \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435\n</code></pre>"},{"location":"tools/docker/#_3","title":"\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u044b","text":"<pre><code># \u0417\u0430\u043f\u0443\u0441\u043a\ndocker run -d --name my-app -p 8000:8000 my-app:latest\ndocker run -it --rm my-app:latest /bin/bash  # \u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\n\n# \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435\ndocker ps              # \u0417\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0435\ndocker ps -a           # \u0412\u0441\u0435\ndocker stop my-app\ndocker start my-app\ndocker restart my-app\ndocker rm my-app\n\n# \u041b\u043e\u0433\u0438\ndocker logs my-app\ndocker logs -f my-app  # Follow\n</code></pre>"},{"location":"tools/docker/#dockerfile","title":"\ud83d\udcc4 Dockerfile","text":""},{"location":"tools/docker/#python","title":"Python \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435","text":"<pre><code># Multi-stage build \u0434\u043b\u044f \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430\nFROM python:3.11-slim as builder\n\nWORKDIR /app\n\n# \u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438\nCOPY requirements.txt .\nRUN pip install --no-cache-dir --user -r requirements.txt\n\n# Production \u043e\u0431\u0440\u0430\u0437\nFROM python:3.11-slim\n\nWORKDIR /app\n\n# \u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b\nCOPY --from=builder /root/.local /root/.local\nENV PATH=/root/.local/bin:$PATH\n\n# \u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u043a\u043e\u0434\nCOPY app/ ./app/\n\n# \u0417\u0430\u043f\u0443\u0441\u043a\nCMD [\"python\", \"-m\", \"app.main\"]\n</code></pre>"},{"location":"tools/docker/#best-practices","title":"Best Practices","text":"<pre><code># \u2705 \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 .dockerignore\n# \u2705 \u041c\u0438\u043d\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0439 \u0441\u043b\u043e\u0438 (\u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0439 RUN)\n# \u2705 \u041a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435: \u0441\u043d\u0430\u0447\u0430\u043b\u0430 requirements, \u043f\u043e\u0442\u043e\u043c \u043a\u043e\u0434\n# \u2705 Multi-stage builds\n# \u2705 \u041d\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0439 \u043e\u0442 root \u0432 production\n\n# \u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e RUN\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y --no-install-recommends gcc &amp;&amp; \\\n    pip install --no-cache-dir -r requirements.txt &amp;&amp; \\\n    apt-get purge -y gcc &amp;&amp; \\\n    apt-get autoremove -y &amp;&amp; \\\n    rm -rf /var/lib/apt/lists/*\n</code></pre>"},{"location":"tools/docker/#docker-compose","title":"\ud83d\udc19 Docker Compose","text":""},{"location":"tools/docker/#docker-composeyml","title":"docker-compose.yml","text":"<pre><code>version: '3.8'\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DATABASE_URL=postgresql://user:pass@db:5432/app\n      - REDIS_URL=redis://redis:6379\n    depends_on:\n      - db\n      - redis\n    volumes:\n      - ./app:/app/app  # \u0414\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438\n    restart: unless-stopped\n\n  db:\n    image: postgres:15\n    environment:\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: pass\n      POSTGRES_DB: app\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    ports:\n      - \"5432:5432\"\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"tools/docker/#_4","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<pre><code># \u0417\u0430\u043f\u0443\u0441\u043a\ndocker-compose up -d\n\n# \u041e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430\ndocker-compose down\ndocker-compose down -v  # \u0421 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435\u043c volumes\n\n# \u041b\u043e\u0433\u0438\ndocker-compose logs -f app\n\n# \u041f\u0435\u0440\u0435\u0441\u0431\u043e\u0440\u043a\u0430\ndocker-compose build\ndocker-compose up -d --build\n\n# \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435\ndocker-compose exec app python manage.py migrate\ndocker-compose exec db psql -U user -d app\n</code></pre>"},{"location":"tools/docker/#dockerignore","title":"\ud83d\udd27 .dockerignore","text":"<pre><code># Git\n.git\n.gitignore\n\n# Python\n__pycache__\n*.py[cod]\n*.egg-info\n.eggs\ndist\nbuild\nvenv\n.venv\n\n# IDE\n.idea\n.vscode\n\n# Environment\n.env\n.env.local\n.env*.local\n\n# Tests\ntests\npytest.ini\n.pytest_cache\n.coverage\nhtmlcov\n\n# Docs\ndocs\n*.md\n!README.md\n\n# Docker\nDockerfile*\ndocker-compose*\n.docker\n\n# Misc\n*.log\n.DS_Store\n</code></pre>"},{"location":"tools/docker/#production-tips","title":"\ud83c\udfed Production Tips","text":""},{"location":"tools/docker/#health-check","title":"Health Check","text":"<pre><code>HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD curl -f http://localhost:8000/health || exit 1\n</code></pre>"},{"location":"tools/docker/#environment-variables","title":"Environment Variables","text":"<pre><code># docker-compose.prod.yml\nservices:\n  app:\n    env_file:\n      - .env.production\n    environment:\n      - NODE_ENV=production\n</code></pre>"},{"location":"tools/docker/#logging","title":"Logging","text":"<pre><code>services:\n  app:\n    logging:\n      driver: \"json-file\"\n      options:\n        max-size: \"10m\"\n        max-file: \"3\"\n</code></pre>"},{"location":"tools/docker/#_5","title":"\ud83d\udcca \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<pre><code># \u041e\u0447\u0438\u0441\u0442\u043a\u0430\ndocker system prune -a     # \u0412\u0441\u0451 \u043d\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0435\ndocker volume prune        # \u0422\u043e\u043b\u044c\u043a\u043e volumes\n\n# \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430\ndocker stats               # \u0420\u0435\u0441\u0443\u0440\u0441\u044b \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432\n\n# Inspect\ndocker inspect my-app\ndocker network ls\ndocker volume ls\n</code></pre>"},{"location":"tools/git/","title":"Git","text":"<p>\u041a\u043e\u043c\u0430\u043d\u0434\u044b, workflow \u0438 best practices.</p>"},{"location":"tools/git/#_1","title":"\ud83d\udd27 \u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":""},{"location":"tools/git/#_2","title":"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":"<pre><code># \u0421\u0442\u0430\u0442\u0443\u0441\ngit status\ngit diff\n\n# \u041a\u043e\u043c\u043c\u0438\u0442\ngit add .\ngit commit -m \"feat: add user authentication\"\n\n# Pull/Push\ngit pull origin main\ngit push origin feature/my-feature\n\n# \u0412\u0435\u0442\u043a\u0438\ngit checkout -b feature/new-feature\ngit checkout main\ngit branch -d feature/old-feature\n</code></pre>"},{"location":"tools/git/#_3","title":"\u0418\u0441\u0442\u043e\u0440\u0438\u044f","text":"<pre><code># \u041b\u043e\u0433\ngit log --oneline -10\ngit log --graph --oneline --all\n\n# \u041f\u043e\u0438\u0441\u043a \u043a\u043e\u043c\u043c\u0438\u0442\u0430\ngit log --grep=\"fix bug\"\ngit log -S \"function_name\"  # \u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443\n</code></pre>"},{"location":"tools/git/#git-flow","title":"\ud83c\udf3f Git Flow","text":""},{"location":"tools/git/#_4","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0432\u0435\u0442\u043a\u0438","text":"<pre><code>main (production)\n  \u2502\n  \u251c\u2500\u2500 develop (integration)\n  \u2502     \u2502\n  \u2502     \u251c\u2500\u2500 feature/user-auth\n  \u2502     \u251c\u2500\u2500 feature/task-management\n  \u2502     \u2514\u2500\u2500 bugfix/login-error\n  \u2502\n  \u2514\u2500\u2500 hotfix/critical-bug\n</code></pre>"},{"location":"tools/git/#workflow","title":"Workflow","text":"<pre><code># 1. \u0421\u043e\u0437\u0434\u0430\u0442\u044c feature \u0432\u0435\u0442\u043a\u0443 \u043e\u0442 develop\ngit checkout develop\ngit pull\ngit checkout -b feature/my-feature\n\n# 2. \u0420\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0430\u0434 \u0444\u0438\u0447\u0435\u0439\ngit add .\ngit commit -m \"feat: implement feature\"\n\n# 3. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u0437 develop\ngit fetch origin\ngit rebase origin/develop\n\n# 4. Push \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c PR\ngit push origin feature/my-feature\n# \u0421\u043e\u0437\u0434\u0430\u0442\u044c Pull Request \u0432 GitHub/GitLab\n\n# 5. \u041f\u043e\u0441\u043b\u0435 merge \u2014 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0435\u0442\u043a\u0443\ngit checkout develop\ngit pull\ngit branch -d feature/my-feature\n</code></pre>"},{"location":"tools/git/#conventional-commits","title":"\ud83d\udcdd Conventional Commits","text":""},{"location":"tools/git/#_5","title":"\u0424\u043e\u0440\u043c\u0430\u0442","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre>"},{"location":"tools/git/#_6","title":"\u0422\u0438\u043f\u044b","text":"\u0422\u0438\u043f \u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 <code>feat</code> \u041d\u043e\u0432\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c <code>fix</code> \u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u0430\u0433\u0430 <code>docs</code> \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f <code>style</code> \u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 (\u0431\u0435\u0437 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043b\u043e\u0433\u0438\u043a\u0438) <code>refactor</code> \u0420\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u043d\u0433 <code>test</code> \u0422\u0435\u0441\u0442\u044b <code>chore</code> \u041e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435 (CI, \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438)"},{"location":"tools/git/#_7","title":"\u041f\u0440\u0438\u043c\u0435\u0440\u044b","text":"<pre><code>git commit -m \"feat(auth): add JWT authentication\"\ngit commit -m \"fix(api): handle null response from external service\"\ngit commit -m \"docs: update README with installation steps\"\ngit commit -m \"refactor(user): extract validation to separate module\"\ngit commit -m \"test(task): add integration tests for task creation\"\n</code></pre>"},{"location":"tools/git/#_8","title":"\ud83d\udd04 \u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438","text":""},{"location":"tools/git/#stash","title":"Stash","text":"<pre><code># \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\ngit stash\ngit stash save \"WIP: user feature\"\n\n# \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\ngit stash pop\ngit stash apply stash@{0}\n\n# \u0421\u043f\u0438\u0441\u043e\u043a\ngit stash list\n</code></pre>"},{"location":"tools/git/#rebase","title":"Rebase","text":"<pre><code># \u0418\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439 rebase (\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 3 \u043a\u043e\u043c\u043c\u0438\u0442\u0430)\ngit rebase -i HEAD~3\n\n# Squash \u043a\u043e\u043c\u043c\u0438\u0442\u043e\u0432 \u0432 PR\ngit rebase -i origin/main\n# \u0417\u0430\u043c\u0435\u043d\u0438\u0442\u044c 'pick' \u043d\u0430 'squash' \u0434\u043b\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f\n</code></pre>"},{"location":"tools/git/#_9","title":"\u041e\u0442\u043c\u0435\u043d\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439","text":"<pre><code># \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0435\u0437\u0430\u043a\u043e\u043c\u043c\u0438\u0447\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 \u0444\u0430\u0439\u043b\u0435\ngit checkout -- file.py\n\n# \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c staged \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\ngit reset HEAD file.py\n\n# \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043a\u043e\u043c\u043c\u0438\u0442 (\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f)\ngit reset --soft HEAD~1\n\n# \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043a\u043e\u043c\u043c\u0438\u0442 (\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f)\ngit reset --hard HEAD~1\n</code></pre>"},{"location":"tools/git/#_10","title":"\u2699\ufe0f \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":""},{"location":"tools/git/#gitignore","title":".gitignore","text":"<pre><code># Python\n__pycache__/\n*.py[cod]\n*.egg-info/\ndist/\nbuild/\n.eggs/\nvenv/\n.venv/\n\n# IDE\n.idea/\n.vscode/\n*.swp\n\n# Environment\n.env\n.env.local\n\n# Database\n*.db\n*.sqlite3\n\n# Logs\n*.log\n\n# OS\n.DS_Store\nThumbs.db\n</code></pre>"},{"location":"tools/git/#_11","title":"\u0410\u043b\u0438\u0430\u0441\u044b","text":"<pre><code># ~/.gitconfig\n[alias]\n    st = status\n    co = checkout\n    br = branch\n    ci = commit\n    lg = log --graph --oneline --all\n    unstage = reset HEAD --\n    last = log -1 HEAD\n</code></pre>"},{"location":"tools/git/#best-practices","title":"\ud83d\udee1\ufe0f Best Practices","text":"<ul> <li>\u2705 \u041c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0435, \u0430\u0442\u043e\u043c\u0430\u0440\u043d\u044b\u0435 \u043a\u043e\u043c\u043c\u0438\u0442\u044b</li> <li>\u2705 \u041f\u043e\u043d\u044f\u0442\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u043c\u0438\u0442\u043e\u0432</li> <li>\u2705 \u041d\u0435 \u043a\u043e\u043c\u043c\u0438\u0442\u0438\u0442\u044c \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u0438 .env \u0444\u0430\u0439\u043b\u044b</li> <li>\u2705 \u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e pull \u0438\u0437 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0432\u0435\u0442\u043a\u0438</li> <li>\u2705 Code review \u0447\u0435\u0440\u0435\u0437 Pull Requests</li> <li>\u274c \u041d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c force push \u0432 \u043e\u0431\u0449\u0438\u0435 \u0432\u0435\u0442\u043a\u0438</li> <li>\u274c \u041d\u0435 \u043a\u043e\u043c\u043c\u0438\u0442\u0438\u0442\u044c \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b</li> </ul>"}]}